<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>drupal on Alfred Nutile</title><link>https://alfrednutile.info/tags/drupal/</link><description>Recent content in drupal on Alfred Nutile</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 20 Jul 2014 00:00:00 +0000</lastBuildDate><atom:link href="https://alfrednutile.info/tags/drupal/index.xml" rel="self" type="application/rss+xml"/><item><title>Drush and Homestead Vagrant Box</title><link>https://alfrednutile.info/posts/100/</link><pubDate>Sun, 20 Jul 2014 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/100/</guid><description><p>Had some trouble doing the normal composer install so I went with the manual install noted here<a href="https://github.com/drush-ops/drush">https://github.com/drush-ops/drush</a></p><p>Basically I downloaded and unzipped the repo to /usr/local/sbin. Then I did a symlink to /usr/bin</p><pre><code>cd /usr/bin
sudo ln -s /usr/local/sbin/drush/drush .</code></pre><p>Then in /usr/local/sbin/drush I ran</p><pre><code>sudo composer install</code></pre></description><tags>drush, drupal, laravel, homestead</tags></item><item><title>When you have to use Angular inside of Drupal</title><link>https://alfrednutile.info/posts/89/</link><pubDate>Thu, 19 Jun 2014 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/89/</guid><description><p>The angularjs module for drupal will direct you to setup a menu path for Angular.js to get it&rsquo;s template files.</p><p>So the Angular route would look like this</p><pre><code>//app.js
behat_reports.config(['$routeProvider',
function ($routeProvider) {
$routeProvider.
when('/', {
templateUrl: '/behat_editor_reports_service_v2/tpl/behat_editor_reports_service_reports_tpl',
controller: 'ReportsAll'
}).
otherwise({
redirectTo: '/'
});
}]);</code></pre><p>What I am suggesting is that when bootstraping Angular is to set the path to the &ldquo;html&rdquo; template folder. Then your Angular app route can look like this</p><pre><code>//app.js
behat_reports.config(['$routeProvider',
function ($routeProvider) {
//Getting the path we set during our drupal modules function
var path = Drupal.settings.behat_reporting_v2.path;
$routeProvider.
when('/', {
templateUrl: '/' + path + '/templates/reports-all.html',
controller: 'ReportsAll'
}).
otherwise({
redirectTo: '/'
});
}]);</code></pre><p>It gets the path from a setting I set below, which is the path that renders this drupal url and setups up Angular in your module.</p><pre><code>//some drupal module you are making
function behat_reporting_v2_api_reports_ui() {
angularjs_init_application('behat_reports_v2');
$path = drupal_get_path('module', 'behat_reporting_v2');
//Set the drupal path
drupal_add_js(array('behat_reporting_v2' => array('path' => $path)), 'setting');<pre><code>drupal_add_js($path . '/js/services.js');
drupal_add_js($path . '/js/reportsController.js');
drupal_add_js($path . '/js/app.js');
return theme('behat_reports_v2');</code></pre><p>}</code></pre><p>You are basically allowing Angular to get the html files it needs without bootstrapping the template system in drupal. Yeah!</p></p></description><tags>angular.js, drupal</tags></item><item><title>Drupal and Composer install or update</title><link>https://alfrednutile.info/posts/65/</link><pubDate>Sun, 04 May 2014 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/65/</guid><description><p>Using composer and drupal, even d7, is great.
But an update or install can leave you with a broken drupal registry.</p><p>So here is a workflow that is pretty bullet proof.</p><p>In this example drupal&rsquo;s composer folder where composer.json lives is located in /var/www/drupal/sites/default/files/composer</p><p>So in there is composer.json and composer.lock</p><p>So when you need to install a new composer library and you updated your json file you can run</p><pre><code>cd /var/www/drupal/
drush composer-rebuild-file
composer --working-dir=/var/www/drupal/sites/default/files/composer update</code></pre><p>If you get an broken registry issue the typically happens when you run</p><pre><code>drush composer-manager update</code></pre><p>You can clear that up with</p><pre><code>drush rr</code></pre><p>And then use composer directly as I did above to update/install your composer related files.</p></description><tags>composer, drupal, php</tags></item></channel></rss>