<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>xdebug on Alfred Nutile</title><link>https://alfrednutile.info/tags/xdebug/</link><description>Recent content in xdebug on Alfred Nutile</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 28 Mar 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://alfrednutile.info/tags/xdebug/index.xml" rel="self" type="application/rss+xml"/><item><title>PHP Xdebug Visual Code</title><link>https://alfrednutile.info/posts/262/</link><pubDate>Thu, 28 Mar 2019 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/262/</guid><description><blockquote><p>UPDATE: PHP 8 and Xdebug 3 2021.07.18</p></blockquote><p>Ok this took a bit since the Xdebug site talks about<code>arch -x86_64 sudo pecl install xdebug</code> which did not work.</p><p>I just did the normal</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo pecl install xdebug</code></pre></div><p>Then I edit the addition it made:</p><p><code>/opt/homebrew/etc/php/8.0/php.ini</code></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">zend_extension<span style="color:#f92672">=</span><span style="color:#e6db74">"xdebug.so"</span>
xdebug.mode<span style="color:#f92672">=</span> debug
xdebug.start_with_request<span style="color:#f92672">=</span> yes</code></pre></div><p>I moved it all to the bottom of the file too. The docs talk about OPCache but not sure this really helped.</p><p>Anyways after this and a PHP restart (see below) it all worked.</p><p>I ran<code>valet restart</code> since I am using that for PHP.</p><p>Then ran<code>php -v</code> to see</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">PHP 8.0.8<span style="color:#f92672">(</span>cli<span style="color:#f92672">)</span><span style="color:#f92672">(</span>built: Jul<span style="color:#ae81ff">12</span><span style="color:#ae81ff">2021</span> 02:58:53<span style="color:#f92672">)</span><span style="color:#f92672">(</span> NTS<span style="color:#f92672">)</span>
Copyright<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> The PHP Group
Zend Engine v4.0.8, Copyright<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> Zend Technologies
with Xdebug v3.0.4, Copyright<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> 2002-2021, by Derick Rethans
with Zend OPcache v8.0.8, Copyright<span style="color:#f92672">(</span>c<span style="color:#f92672">)</span>, by Zend Technologies</code></pre></div><p>And my launch.json for VSCode is</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#960050;background-color:#1e0010">//</span><span style="color:#960050;background-color:#1e0010">Use</span><span style="color:#960050;background-color:#1e0010">IntelliSense</span><span style="color:#960050;background-color:#1e0010">to</span><span style="color:#960050;background-color:#1e0010">learn</span><span style="color:#960050;background-color:#1e0010">about</span><span style="color:#960050;background-color:#1e0010">possible</span><span style="color:#960050;background-color:#1e0010">attributes.</span><span style="color:#960050;background-color:#1e0010">//</span><span style="color:#960050;background-color:#1e0010">Hover</span><span style="color:#960050;background-color:#1e0010">to</span><span style="color:#960050;background-color:#1e0010">view</span><span style="color:#960050;background-color:#1e0010">descriptions</span><span style="color:#960050;background-color:#1e0010">of</span><span style="color:#960050;background-color:#1e0010">existing</span><span style="color:#960050;background-color:#1e0010">attributes.</span><span style="color:#960050;background-color:#1e0010">//</span><span style="color:#960050;background-color:#1e0010">For</span><span style="color:#960050;background-color:#1e0010">more</span><span style="color:#960050;background-color:#1e0010">information,</span><span style="color:#960050;background-color:#1e0010">visit:</span><span style="color:#960050;background-color:#1e0010">https://go.microsoft.com/fwlink/?linkid=830387</span><span style="color:#f92672">"version"</span>:<span style="color:#e6db74">"0.2.0"</span>,<span style="color:#f92672">"configurations"</span>: [
{<span style="color:#f92672">"name"</span>:<span style="color:#e6db74">"Listen for Xdebug"</span>,<span style="color:#f92672">"type"</span>:<span style="color:#e6db74">"php"</span>,<span style="color:#f92672">"request"</span>:<span style="color:#e6db74">"launch"</span>,<span style="color:#f92672">"port"</span>:<span style="color:#ae81ff">9003</span>
},
{<span style="color:#f92672">"name"</span>:<span style="color:#e6db74">"Launch currently open script"</span>,<span style="color:#f92672">"type"</span>:<span style="color:#e6db74">"php"</span>,<span style="color:#f92672">"request"</span>:<span style="color:#e6db74">"launch"</span>,<span style="color:#f92672">"program"</span>:<span style="color:#e6db74">"${file}"</span>,<span style="color:#f92672">"cwd"</span>:<span style="color:#e6db74">"${fileDirname}"</span>,<span style="color:#f92672">"port"</span>:<span style="color:#ae81ff">0</span>,<span style="color:#f92672">"runtimeArgs"</span>: [<span style="color:#e6db74">"-dxdebug.start_with_request=yes"</span>
],<span style="color:#f92672">"env"</span>: {<span style="color:#f92672">"XDEBUG_MODE"</span>:<span style="color:#e6db74">"debug,develop"</span>,<span style="color:#f92672">"XDEBUG_CONFIG"</span>:<span style="color:#e6db74">"client_port=${port}"</span>
}
},
{<span style="color:#f92672">"name"</span>:<span style="color:#e6db74">"Launch Built-in web server"</span>,<span style="color:#f92672">"type"</span>:<span style="color:#e6db74">"php"</span>,<span style="color:#f92672">"request"</span>:<span style="color:#e6db74">"launch"</span>,<span style="color:#f92672">"runtimeArgs"</span>: [<span style="color:#e6db74">"-dxdebug.mode=debug"</span>,<span style="color:#e6db74">"-dxdebug.start_with_request=yes"</span>,<span style="color:#e6db74">"-S"</span>,<span style="color:#e6db74">"localhost:0"</span>
],<span style="color:#f92672">"program"</span>:<span style="color:#e6db74">""</span>,<span style="color:#f92672">"cwd"</span>:<span style="color:#e6db74">"${workspaceRoot}"</span>,<span style="color:#f92672">"port"</span>:<span style="color:#ae81ff">9003</span>,<span style="color:#f92672">"serverReadyAction"</span>: {<span style="color:#f92672">"pattern"</span>:<span style="color:#e6db74">"Development Server \\(http://localhost:([0-9]+)\\) started"</span>,<span style="color:#f92672">"uriFormat"</span>:<span style="color:#e6db74">"http://localhost:%s"</span>,<span style="color:#f92672">"action"</span>:<span style="color:#e6db74">"openExternally"</span>
}
}
]
}</code></pre></div><blockquote><p>UPDATE: PHP 7.4
Every time I do<code>value use php</code> I then lose my xdebug setup :( here is me taking a moment to stop having that happen</p></blockquote><pre><code>vim /usr/local/etc/php/7.4/php.ini</code></pre><p>Then add this</p><pre><code>[PHP]<p>zend_extension="xdebug.so"
xdebug.remote_enable = 1
xdebug.remote_autostart = 1
xdebug.remote_handler = dbgp
xdebug.remote_host = 127.0.0.1
xdebug.remote_port = 9000
xdebug.remote_mode = req</code></pre><p>And then I am set again! Notice I am using 9000 above my insanity of using 9005 below has passed</p></p><p>I put two files in my home directory, one starts with the above and one does not. Then I put this alias into my<code>~/.zshrc</code></p><pre><code>alias debug_on="cp ~/Code/php.ini.debugon /usr/local/etc/php/7.4/php.ini"
alias debug_off="cp ~/Code/php.ini.debugoff /usr/local/etc/php/7.4/php.ini"</code></pre><p><code>source ~/.zshrc</code></p><p>and now I can easily turn this on and off to save TONS of time with any php job (testing, etc)</p><blockquote><p>END UPDATE</p></blockquote><p>This article got me going on using Xdebug<a href="https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug">https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug</a></p><p>But since 7.2 it has been tricky on the Mac.</p><pre><code>pecl install xdebug</code></pre><p>Then<code>vim /usr/local/etc/php/7.2/php.ini</code></p><p>And remove from there any reference to<code>xdebug.so</code></p><p>Then<code>/usr/local/etc/php/7.2/conf.d/ext-xdebug.ini</code></p><pre><code>[xdebug]
zend_extension="xdebug.so"
xdebug.remote_autostart=1
xdebug.remote_port=9005
xdebug.remote_enable=1
xdebug.profiler_enable=1
xdebug.profiler_output_dir="/Users/alfrednutile/xdebugtmp/"</code></pre><p>and restart the services</p><pre><code>brew services restart php72</code></pre><p>You should be able to run<code>php --ini</code> at the command line.</p><pre><code>>php --ini
Configuration File (php.ini) Path: /usr/local/etc/php/7.2
Loaded Configuration File: /usr/local/etc/php/7.2/php.ini
Scan for additional .ini files in: /usr/local/etc/php/7.2/conf.d
Additional .ini files parsed: /usr/local/etc/php/7.2/conf.d/ext-opcache.ini,
/usr/local/etc/php/7.2/conf.d/ext-xdebug.ini,
/usr/local/etc/php/7.2/conf.d/php-memory-limits.ini</code></pre><p>Visual Code&rsquo;s xdebug<code>launch.json</code> looks like:</p><pre><code>{
"version": "0.2.0",
"configurations": [{
"name": "Listen for XDebug",
"type": "php",
"request": "launch",
"port": 9005
},
{
"name": "Launch currently open script",
"type": "php",
"request": "launch",
"program": "${file}",
"cwd": "${fileDirname}",
"port": 9005
}
]
}</code></pre></description><tags>php, xdebug</tags></item></channel></rss>