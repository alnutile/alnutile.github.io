<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>xdebug on Alfred Nutile</title><link>https://alfrednutile.info/tags/xdebug/</link><description>Recent content in xdebug on Alfred Nutile</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 28 Mar 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://alfrednutile.info/tags/xdebug/index.xml" rel="self" type="application/rss+xml"/><item><title>PHP Xdebug Visual Code</title><link>https://alfrednutile.info/posts/262/</link><pubDate>Thu, 28 Mar 2019 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/262/</guid><description>&lt;blockquote>
&lt;p>UPDATE: PHP 8 and Xdebug 3 2021.07.18&lt;/p>
&lt;/blockquote>
&lt;p>Ok this took a bit since the Xdebug site talks about &lt;code>arch -x86_64 sudo pecl install xdebug&lt;/code> which did not work.&lt;/p>
&lt;p>I just did the normal&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">sudo pecl install xdebug
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then I edit the addition it made:&lt;/p>
&lt;p>&lt;code>/opt/homebrew/etc/php/8.0/php.ini&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">zend_extension&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;xdebug.so&amp;#34;&lt;/span>
xdebug.mode &lt;span style="color:#f92672">=&lt;/span> debug
xdebug.start_with_request &lt;span style="color:#f92672">=&lt;/span> yes
&lt;/code>&lt;/pre>&lt;/div>&lt;p>I moved it all to the bottom of the file too. The docs talk about OPCache but not sure this really helped.&lt;/p>
&lt;p>Anyways after this and a PHP restart (see below) it all worked.&lt;/p>
&lt;p>I ran &lt;code>valet restart&lt;/code> since I am using that for PHP.&lt;/p>
&lt;p>Then ran &lt;code>php -v&lt;/code> to see&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">PHP 8.0.8 &lt;span style="color:#f92672">(&lt;/span>cli&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">(&lt;/span>built: Jul &lt;span style="color:#ae81ff">12&lt;/span> &lt;span style="color:#ae81ff">2021&lt;/span> 02:58:53&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#f92672">(&lt;/span> NTS &lt;span style="color:#f92672">)&lt;/span>
Copyright &lt;span style="color:#f92672">(&lt;/span>c&lt;span style="color:#f92672">)&lt;/span> The PHP Group
Zend Engine v4.0.8, Copyright &lt;span style="color:#f92672">(&lt;/span>c&lt;span style="color:#f92672">)&lt;/span> Zend Technologies
with Xdebug v3.0.4, Copyright &lt;span style="color:#f92672">(&lt;/span>c&lt;span style="color:#f92672">)&lt;/span> 2002-2021, by Derick Rethans
with Zend OPcache v8.0.8, Copyright &lt;span style="color:#f92672">(&lt;/span>c&lt;span style="color:#f92672">)&lt;/span>, by Zend Technologies
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And my launch.json for VSCode is&lt;/p>
&lt;div class="highlight">&lt;pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-json" data-lang="json">{
&lt;span style="color:#960050;background-color:#1e0010">//&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">Use&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">IntelliSense&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">to&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">learn&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">about&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">possible&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">attributes.&lt;/span>
&lt;span style="color:#960050;background-color:#1e0010">//&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">Hover&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">to&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">view&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">descriptions&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">of&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">existing&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">attributes.&lt;/span>
&lt;span style="color:#960050;background-color:#1e0010">//&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">For&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">more&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">information,&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">visit:&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">https://go.microsoft.com/fwlink/?linkid=830387&lt;/span>
&lt;span style="color:#f92672">&amp;#34;version&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;0.2.0&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;configurations&amp;#34;&lt;/span>: [
{
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Listen for Xdebug&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;php&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;request&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;launch&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;port&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">9003&lt;/span>
},
{
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Launch currently open script&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;php&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;request&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;launch&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;program&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;${file}&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;cwd&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;${fileDirname}&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;port&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">0&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;runtimeArgs&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;-dxdebug.start_with_request=yes&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;env&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;XDEBUG_MODE&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;debug,develop&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;XDEBUG_CONFIG&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;client_port=${port}&amp;#34;&lt;/span>
}
},
{
&lt;span style="color:#f92672">&amp;#34;name&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Launch Built-in web server&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;php&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;request&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;launch&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;runtimeArgs&amp;#34;&lt;/span>: [
&lt;span style="color:#e6db74">&amp;#34;-dxdebug.mode=debug&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;-dxdebug.start_with_request=yes&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;-S&amp;#34;&lt;/span>,
&lt;span style="color:#e6db74">&amp;#34;localhost:0&amp;#34;&lt;/span>
],
&lt;span style="color:#f92672">&amp;#34;program&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;cwd&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;${workspaceRoot}&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;port&amp;#34;&lt;/span>: &lt;span style="color:#ae81ff">9003&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;serverReadyAction&amp;#34;&lt;/span>: {
&lt;span style="color:#f92672">&amp;#34;pattern&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Development Server \\(http://localhost:([0-9]+)\\) started&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;uriFormat&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;http://localhost:%s&amp;#34;&lt;/span>,
&lt;span style="color:#f92672">&amp;#34;action&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;openExternally&amp;#34;&lt;/span>
}
}
]
}
&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>UPDATE: PHP 7.4
Every time I do &lt;code>value use php&lt;/code> I then lose my xdebug setup :( here is me taking a moment to stop having that happen&lt;/p>
&lt;/blockquote>
&lt;pre>&lt;code>vim /usr/local/etc/php/7.4/php.ini
&lt;/code>&lt;/pre>&lt;p>Then add this&lt;/p>
&lt;pre>&lt;code>[PHP]
zend_extension=&amp;quot;xdebug.so&amp;quot;
xdebug.remote_enable = 1
xdebug.remote_autostart = 1
xdebug.remote_handler = dbgp
xdebug.remote_host = 127.0.0.1
xdebug.remote_port = 9000
xdebug.remote_mode = req
&lt;/code>&lt;/pre>&lt;p>And then I am set again! Notice I am using 9000 above my insanity of using 9005 below has passed&lt;/p>
&lt;p>I put two files in my home directory, one starts with the above and one does not. Then I put this alias into my &lt;code>~/.zshrc&lt;/code>&lt;/p>
&lt;pre>&lt;code>alias debug_on=&amp;quot;cp ~/Code/php.ini.debugon /usr/local/etc/php/7.4/php.ini&amp;quot;
alias debug_off=&amp;quot;cp ~/Code/php.ini.debugoff /usr/local/etc/php/7.4/php.ini&amp;quot;
&lt;/code>&lt;/pre>&lt;p>&lt;code>source ~/.zshrc&lt;/code>&lt;/p>
&lt;p>and now I can easily turn this on and off to save TONS of time with any php job (testing, etc)&lt;/p>
&lt;blockquote>
&lt;p>END UPDATE&lt;/p>
&lt;/blockquote>
&lt;p>This article got me going on using Xdebug &lt;a href="https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug">https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug&lt;/a>&lt;/p>
&lt;p>But since 7.2 it has been tricky on the Mac.&lt;/p>
&lt;pre>&lt;code>pecl install xdebug
&lt;/code>&lt;/pre>&lt;p>Then &lt;code>vim /usr/local/etc/php/7.2/php.ini&lt;/code>&lt;/p>
&lt;p>And remove from there any reference to &lt;code>xdebug.so&lt;/code>&lt;/p>
&lt;p>Then &lt;code>/usr/local/etc/php/7.2/conf.d/ext-xdebug.ini&lt;/code>&lt;/p>
&lt;pre>&lt;code>[xdebug]
zend_extension=&amp;quot;xdebug.so&amp;quot;
xdebug.remote_autostart=1
xdebug.remote_port=9005
xdebug.remote_enable=1
xdebug.profiler_enable=1
xdebug.profiler_output_dir=&amp;quot;/Users/alfrednutile/xdebugtmp/&amp;quot;
&lt;/code>&lt;/pre>&lt;p>and restart the services&lt;/p>
&lt;pre>&lt;code>brew services restart php72
&lt;/code>&lt;/pre>&lt;p>You should be able to run &lt;code>php --ini&lt;/code> at the command line.&lt;/p>
&lt;pre>&lt;code>&amp;gt;php --ini
Configuration File (php.ini) Path: /usr/local/etc/php/7.2
Loaded Configuration File: /usr/local/etc/php/7.2/php.ini
Scan for additional .ini files in: /usr/local/etc/php/7.2/conf.d
Additional .ini files parsed: /usr/local/etc/php/7.2/conf.d/ext-opcache.ini,
/usr/local/etc/php/7.2/conf.d/ext-xdebug.ini,
/usr/local/etc/php/7.2/conf.d/php-memory-limits.ini
&lt;/code>&lt;/pre>&lt;p>Visual Code&amp;rsquo;s xdebug &lt;code>launch.json&lt;/code> looks like:&lt;/p>
&lt;pre>&lt;code>{
&amp;quot;version&amp;quot;: &amp;quot;0.2.0&amp;quot;,
&amp;quot;configurations&amp;quot;: [{
&amp;quot;name&amp;quot;: &amp;quot;Listen for XDebug&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;php&amp;quot;,
&amp;quot;request&amp;quot;: &amp;quot;launch&amp;quot;,
&amp;quot;port&amp;quot;: 9005
},
{
&amp;quot;name&amp;quot;: &amp;quot;Launch currently open script&amp;quot;,
&amp;quot;type&amp;quot;: &amp;quot;php&amp;quot;,
&amp;quot;request&amp;quot;: &amp;quot;launch&amp;quot;,
&amp;quot;program&amp;quot;: &amp;quot;${file}&amp;quot;,
&amp;quot;cwd&amp;quot;: &amp;quot;${fileDirname}&amp;quot;,
&amp;quot;port&amp;quot;: 9005
}
]
}
&lt;/code>&lt;/pre></description><tags>php, xdebug</tags></item></channel></rss>