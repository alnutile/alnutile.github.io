<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>laravel on Alfred Nutile</title><link>https://alnutile.github.io/tags/laravel/</link><description>Recent content in laravel on Alfred Nutile</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 14 Mar 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://alnutile.github.io/tags/laravel/index.xml" rel="self" type="application/rss+xml"/><item><title>Cognito and OAuth</title><link>https://alnutile.github.io/posts/261/</link><pubDate>Thu, 14 Mar 2019 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/261/</guid><description>make your App Client
Make sure to check
Make some scopes uner Resource Server
Then &amp;ldquo;App Client Settings&amp;rdquo;
Connect it to &amp;ldquo;Cognito User Pool&amp;rdquo;
And choose &amp;ldquo;Client Credentials&amp;rdquo; from &amp;ldquo;Allowed OAuth Flow&amp;rdquo; choosing some scopes</description></item><item><title>PHPUnit CodeCoverage</title><link>https://alnutile.github.io/posts/260/</link><pubDate>Wed, 09 Jan 2019 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/260/</guid><description>PHPUnit CodeCoverage PHPUnit CodeCoverage
There is a ton of information about your code PHPUNit CodeCoverage can provide. At the root just making sure your coverage is at a certain level and if not where is it lacking.
With it&amp;rsquo;s xml output I use a script found here to check during our TravisCI builds if the code is meeting a required level.
Here is a gist of that script here and here is the .</description></item><item><title>Bitbucket Pipeline</title><link>https://alnutile.github.io/posts/257/</link><pubDate>Tue, 18 Sep 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/257/</guid><description>BitBucket has a nice feature call Pipelines https://bitbucket.org/product/features/pipelines for $0 you can, even for private repos have a decent CI flow.
Private repos CI Pipeline $0!!
It took a bit to get going though since the docs do not talk about PHP and MySQL in enough details. Here is what I ended up with for a bitbucket-pipelines.yml
# This is a sample build configuration for PHP.
# Check our guides at https://confluence.</description></item><item><title>JSONEditor, Vue and Vuex</title><link>https://alnutile.github.io/posts/256/</link><pubDate>Mon, 20 Aug 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/256/</guid><description>As I post here I wanted to use JSONEditor as a component. But with Vuex I was able to reduce the work quite a ton. Here is my store for the json_field:
export default {
state: {
json_field: null,
},
getters: {
json_field: state =&amp;gt; {
return state.json_field;
}
},
mutations: {
jsonField(state, json_field) {
state.json_field = json_field;
}
},
};
Then my JSONEditor.vue component:
&amp;lt;template&amp;gt;
&amp;lt;div id=&amp;quot;jsoneditor&amp;quot; ref=&amp;quot;editor&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/template&amp;gt;
&amp;lt;script&amp;gt;
import JSONEditor from 'jsoneditor';
import { mapGetters } from 'vuex'
export default Vue.</description></item><item><title>Laravel Filter Scope on a Model</title><link>https://alnutile.github.io/posts/255/</link><pubDate>Mon, 20 Aug 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/255/</guid><description>So I find myself writing searchable pages that, via an API or what not, someone can filter the page by different fields on the model. This can end up being a Controller class that does a lot of filters off the Request. Or it can be a Repository class that abstracts the business logic into one place for several related models.
But in many cases it really is just one Model being filtered.</description></item><item><title>Query Strings, Vue and Bootstrap Active Tab</title><link>https://alnutile.github.io/posts/254/</link><pubDate>Sun, 19 Aug 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/254/</guid><description>In order to have the tabs and URL change as needed when the user lands on the page or clicks the tab I had to setup a few things.
First I setup the Vue.js router as seen here
Then my component will work out the rest.
Using BV
I have tabs and then I set those tabs as needed.
&amp;lt;b-tabs v-model=&amp;quot;activeTab&amp;quot;&amp;gt;
&amp;lt;b-tab title=&amp;quot;Settings&amp;quot; active &amp;gt;
&amp;lt;div class=&amp;quot;mt-4 alert alert-info&amp;quot;&amp;gt;
Manage related policies by clicking on the Tabs.</description></item><item><title>Valet Laravel 7.1 and 7.2</title><link>https://alnutile.github.io/posts/253/</link><pubDate>Sat, 18 Aug 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/253/</guid><description>..</description></item><item><title>PHPStan Setup</title><link>https://alnutile.github.io/posts/251/</link><pubDate>Sun, 05 Aug 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/251/</guid><description>There is a good episode here https://www.phproundtable.com/episode/using-static-analyzers-to-improve-our-php-codebases that talks about this.
The short of it is that it can easily catch some issues that your tests or IDE did not. For example I had a class name overlap due to a typo and it found it. From there it will output tons of other info that may just help guide you in your work.
The install is super easy as seen in the docs https://github.</description></item><item><title>Vuex External File</title><link>https://alnutile.github.io/posts/250/</link><pubDate>Tue, 03 Jul 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/250/</guid><description>Setup Vuex with external file https://vuex.vuejs.org/installation.html
But after this make a file in the resources/assets/js called store.js then set it up as needed Here I will have one loading state
export default {
state: {
loading: true,
},
getters: {
loading: state =&amp;gt; {
return state.loading;
},
},
mutations: {
loading(state, loading) {
state.loading = loading;
}
}
};
now import it into your app.js
import store from './store';
and</description></item><item><title>Simple API_Token Auth for VueJS Components and Laravel</title><link>https://alnutile.github.io/posts/249/</link><pubDate>Wed, 27 Jun 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/249/</guid><description>For those non Passport moments just a simple site that has VueJS Components that need to access routes with authentication in place.
Thanks to
https://pineco.de/vue-components-laravel-based-apis/ https://andrew.cool/blog/64/How-to-use-API-tokens-for-authentication-in-Laravel-5-2 Route File routes/api.php
Route::get('/trigger_contacts', function (Request $request) {
\Log::info(&amp;quot;Triggering Contacts&amp;quot;);
return response()-&amp;gt;json(null, 200);
})-&amp;gt;middleware('auth:api');
This will not work out of the box, you will get a 401. Let&amp;rsquo;s plug some things in.
Blade My main resources/views/layouts/app.blade.php
&amp;lt;script&amp;gt;
window.Laravel = {!! json_encode([
&amp;quot;apiToken&amp;quot; =&amp;gt; auth()-&amp;gt;user()-&amp;gt;api_token ?</description></item><item><title>Dusk Screenshots to S3 of Failing tests</title><link>https://alnutile.github.io/posts/248/</link><pubDate>Tue, 26 Jun 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/248/</guid><description>I can be really annoying to troubleshoot a failed test in Dusk when using CI systems. What I ended up doing was setting up my project to send these files to S3 on fail.
Here are the steps
Setup You App This is just S3 storage so make sure you have a bucket and a folder in the bucket to write to. Basically for AWS you make an IAM with a key and secret and let it read/write to this folder.</description></item><item><title>Laravel Queue Restart and 'Why are my changes not showing up'</title><link>https://alnutile.github.io/posts/246/</link><pubDate>Sun, 20 May 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/246/</guid><description>Just a note to self and others who have suffered this. If you are running queues locally, for what ever reason, then any changes you make in code you need to restart your queue daemon.
php artisan queue:restart
This will cause the daemon to look at a timestamp and restart if that is newer than before &amp;ldquo;e.g. you ran the above. And this will force the in memory process to update itself from the latest code base.</description></item><item><title>Query Strings and VueJS</title><link>https://alnutile.github.io/posts/244/</link><pubDate>Tue, 08 May 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/244/</guid><description>Quick way to make the url reflect the query string so the user can share the url and filters.
This is component based VueJS building so not an SPA But I still install &amp;quot;vue-router&amp;quot;: &amp;quot;^3.0.1&amp;quot;
And load it
import VueRouter from 'vue-router';
Vue.use(VueRouter);
The on the component I set a watch on the router.
watch: {
$route(to, from) {
this.setModelFromQueryString();
this.search();
}
},
In this case it will set the query strings then trigger the &amp;ldquo;search&amp;rdquo; to load the data into the page.</description></item><item><title>Getting Started with Orchestra Testbench for Laravel Package Development</title><link>https://alnutile.github.io/posts/241/</link><pubDate>Sun, 01 Apr 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/241/</guid><description>The goal of this article will allow one to setup a stand alone package working with it&amp;rsquo;s own tests and has access to all of the normal Laravel workflows outside of Laravel. So you can build it using the easier conventions and helpers Laravel offers.
Since my work will include database usage I will grab both packages:
composer require --dev &amp;quot;orchestra/testbench:&amp;lt;=3.5&amp;quot; &amp;quot;orchestra/database:v3.5.0&amp;quot;
I will setup my composer.json after this as such:</description></item><item><title>BrowserSync and Laravel</title><link>https://alnutile.github.io/posts/239/</link><pubDate>Thu, 15 Mar 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/239/</guid><description>Quick reminder to take advantage of this amazing feature https://laravel.com/docs/5.6/mix#browsersync-reloading
No more reloading your browser.
yarn add browser-sync --dev
then to your webpack.mix.js e.g. the domain of the site you are working on.
mix.browserSync('foo.test');
finally
yarn run watch
Note turn off sourceMaps when running this else it can be kinda slow</description></item><item><title>GroupBy not Sorting by latest</title><link>https://alnutile.github.io/posts/240/</link><pubDate>Thu, 15 Mar 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/240/</guid><description>Just to make this easy to find. I had a report to write which had numerous daily rows of the same related model data. So in this cause I was tracking servers and security reports.
My reports where daily like this
id server_id failed type 1 1 1 security 2 1 1 testing 3 1 0 testing But a groupBy here on server_id would return ID 1 so it would appear as if it was still failing.</description></item><item><title>Troubleshoot Laravel Socialite and Github login</title><link>https://alnutile.github.io/posts/238/</link><pubDate>Sun, 04 Mar 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/238/</guid><description>This has driven me mad too many times. Basically you will get very little feedback if there is any issue getting the token from Github.
The problem is in this method.
public function user()
{
if ($this-&amp;gt;hasInvalidState()) {
throw new InvalidStateException;
}
$response = $this-&amp;gt;getAccessTokenResponse($this-&amp;gt;getCode());
$user = $this-&amp;gt;mapUserToObject($this-&amp;gt;getUserByToken(
$token = Arr::get($response, 'access_token')
));
return $user-&amp;gt;setToken($token)
-&amp;gt;setRefreshToken(Arr::get($response, 'refresh_token'))
-&amp;gt;setExpiresIn(Arr::get($response, 'expires_in'));
}
This is in the vendor/laravel/socialite/src/Two/AbstractProvider.php
So for example my real error was:</description></item><item><title>Passing from Blade to VueJs</title><link>https://alnutile.github.io/posts/236/</link><pubDate>Sat, 24 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/236/</guid><description>A lot of posts had this style.
I ended up just needing this:
The controller simply does this:</description></item><item><title>Docker Laravel and Cron</title><link>https://alnutile.github.io/posts/234/</link><pubDate>Fri, 16 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/234/</guid><description>This to this post here
for the idea.
Basically running cron in Docker is easy BUT once the Host had more than one Docker client cron stopped working. No clue why but to solve this I did two things
One made a script that was on the Docker Client
/scheduler.sh
#!/bin/bash
php /app/artisan schedule:run --verbose --no-interaction &amp;gt;&amp;gt; /dev/null 2&amp;gt;&amp;amp;1
sleep 60
Then I did this in the Dockerfile
COPY scheduler.sh /
RUN chmod 755 /scheduler.</description></item><item><title>Laravel and AWS Rekognition</title><link>https://alnutile.github.io/posts/235/</link><pubDate>Fri, 16 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/235/</guid><description>&amp;hellip;.</description></item><item><title>Pusher and Laravel Updates</title><link>https://alnutile.github.io/posts/233/</link><pubDate>Wed, 14 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/233/</guid><description>Getting error &amp;ldquo;Did you forget to specify the cluster when creating the Pusher instance&amp;rdquo;
Then need to set config/broadcasting.php:
'pusher' =&amp;gt; [
'driver' =&amp;gt; 'pusher',
'key' =&amp;gt; env('PUSHER_KEY'),
'secret' =&amp;gt; env('PUSHER_SECRET'),
'app_id' =&amp;gt; env('PUSHER_APP_ID'),
'options' =&amp;gt; [
//
],
],
to
'pusher' =&amp;gt; [
'driver' =&amp;gt; 'pusher',
'key' =&amp;gt; env('PUSHER_KEY'),
'secret' =&amp;gt; env('PUSHER_SECRET'),
'app_id' =&amp;gt; env('PUSHER_APP_ID'),
'options' =&amp;gt; [
&amp;quot;cluster&amp;quot; =&amp;gt; 'us2',
&amp;quot;encrypted&amp;quot; =&amp;gt; true
],
],
And if still calling pusher manually in your js update to be:</description></item><item><title>Dusk and Production (with Dusk disabled)</title><link>https://alnutile.github.io/posts/232/</link><pubDate>Mon, 05 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/232/</guid><description>In DatabaseServiceProvider.php line 78:
Class 'Faker\Factory' not found
I had a ton if issues getting dusk on production, especially since production would run
composer install --no-dev --prefer-dist --no-interaction
To get around this issue I had to do a few things
One, if you are stuck and can not even run php artisan on the server:
rm bootstrap/cache/services.php
rm bootstrap/cache/packages.php
Two, turn off auto discovery for Dusk and just add it to the app/Providers/AppServiceProvider.</description></item><item><title>Testing Laravel API, Spark with Authentication</title><link>https://alnutile.github.io/posts/231/</link><pubDate>Sun, 04 Feb 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/231/</guid><description>Just a reminder to self, if I want to test an API I made and need to pass and api_token
&amp;lt;?php
namespace Tests\Feature;
use Tests\TestCase;
use Illuminate\Foundation\Testing\WithFaker;
use Illuminate\Foundation\Testing\RefreshDatabase;
use App\Quote;
use Laravel\Spark\Repositories\TokenRepository;
class QuoteControllerTest extends TestCase
{
use RefreshDatabase;
public function testGettingAQuoteUsingToken()
{
$user = factory(\App\User::class)-&amp;gt;create();
$team = factory(\App\Team::class)-&amp;gt;create();
$team-&amp;gt;users()-&amp;gt;attach($user-&amp;gt;id, ['role' =&amp;gt; &amp;quot;member&amp;quot;]);
$quote = factory(\App\Quote::class)-&amp;gt;create([
'team_id' =&amp;gt; $team-&amp;gt;id,
'posted_by' =&amp;gt; $user-&amp;gt;id
]);
$token = new TokenRepository();
$token = $token-&amp;gt;createToken(
$user,
'get_quote',
[]
)-&amp;gt;token;
$this-&amp;gt;json('GET', &amp;quot;/api/teams/{$team-&amp;gt;id}/quotes/random?</description></item><item><title>Example of Making Documentation in Markdown with PDF Output</title><link>https://alnutile.github.io/posts/230/</link><pubDate>Fri, 05 Jan 2018 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/230/</guid><description>Many of the sites I make have a need for a Support page for staff to know how to do things like add content, manage users etc. This article will cover how I go about writing my help docs in Markdown and then displaying it on the website with an option to print as PDF.
Writing MarkDown To begin with, I made the help doc in mine. I made a sample one here</description></item><item><title>Laravel Asset Notes WIP</title><link>https://alnutile.github.io/posts/227/</link><pubDate>Sat, 16 Dec 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/227/</guid><description>This is just a reminder area of all the minor details as I find them that I need to remember
FontAwesome yarn add font-awesome
Then in my resources/assets/sass/app.scss
// Fonts
@import url(&amp;quot;https://fonts.googleapis.com/css?family=Raleway:300,400,600&amp;quot;);
// Variables
@import &amp;quot;variables&amp;quot;;
// Bootstrap
@import &amp;quot;~bootstrap-sass/assets/stylesheets/bootstrap&amp;quot;;
@import &amp;quot;~font-awesome/css/font-awesome&amp;quot;; My webpack is the default
mix.js('resources/assets/js/app.js', 'public/js')
.sass('resources/assets/sass/app.scss', 'public/css');
set to go!
If using Less
#resources/assets/less/app.less
@import &amp;quot;./../../../node_modules/font-awesome/less/font-awesome&amp;quot;;</description></item><item><title>PostMark SMTP for sending Notifications and Password Resets</title><link>https://alnutile.github.io/posts/226/</link><pubDate>Thu, 14 Dec 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/226/</guid><description>I have been using PostMark for years https://postmarkapp.com for sending emails, e.g. password reset and more.
They have an API but to get going with SMTP all the info is here
Basically get your KEY and use it in your .env like this:
MAIL_DRIVER=smtp
MAIL_HOST=smtp.postmarkapp.com
MAIL_PORT=587
MAIL_USERNAME=foo
MAIL_PASSWORD=foo
MAIL_ENCRYPTION=tls
And all should work. Just make sure to
Register the domain in their domain ui Set the from info in Laravel</description></item><item><title>Dusk Notes</title><link>https://alnutile.github.io/posts/225/</link><pubDate>Sun, 10 Dec 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/225/</guid><description>Just keeping a list of gotchas around dusk.
use RefreshDatabase not working Cost: 1 hour lost
Basically I had to go back to the slower &amp;ldquo;use DatabaseMigrations;&amp;rdquo; otherwise it would not work. The user was null.
Links: This thread helped
Headless or not Cost: 1 hour lost or less
For some odd reasons my tests started coming up blank.
I turned off headless in this class DuskTestCase
protected function driver()
{
$args = [
'--disable-gpu',
'--headless'
];
if (env(&amp;quot;HEADLESS_OFF&amp;quot;)) {
$args = [
'--disable-gpu'
];
}
$options = (new ChromeOptions)-&amp;gt;addArguments($args);
return RemoteWebDriver::create(
'http://localhost:9515',
DesiredCapabilities::chrome()-&amp;gt;setCapability(
ChromeOptions::CAPABILITY,
$options
)
);
}
And this way it still works on travis.</description></item><item><title>Laravel Shift and Your Day Job</title><link>https://alnutile.github.io/posts/223/</link><pubDate>Fri, 03 Nov 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/223/</guid><description>** UPDATED November 22 2017 **
The service Laravel Shift is a great way to save a ton of time and keep your Laravel application up to date.
But sometimes you may not be allowed to share access to your company Github account for this process since it is hard to limit access at the repo level.
In this case I have a quick way to get your work done and back into the company repo IF that is okay with your boss.</description></item><item><title>Wrapping JSONEditor in Vue as Well as Laravel Blade</title><link>https://alnutile.github.io/posts/222/</link><pubDate>Wed, 01 Nov 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/222/</guid><description>UPDATED November 05 2017
This will cover how to make a JSONEditor component that I can then use in a Blade template and listen to events.
You will end up with this:
First making sure I have all the packages I need:
//package.json
&amp;quot;devDependencies&amp;quot;: {
&amp;quot;axios&amp;quot;: &amp;quot;^0.17&amp;quot;,
&amp;quot;bootstrap-sass&amp;quot;: &amp;quot;^3.3.7&amp;quot;,
&amp;quot;cross-env&amp;quot;: &amp;quot;^5.0.1&amp;quot;,
&amp;quot;jquery&amp;quot;: &amp;quot;^3.2&amp;quot;,
&amp;quot;laravel-mix&amp;quot;: &amp;quot;^1.0&amp;quot;,
&amp;quot;lodash&amp;quot;: &amp;quot;^4.17.4&amp;quot;,
&amp;quot;vue&amp;quot;: &amp;quot;^2.1.10&amp;quot;
},
&amp;quot;dependencies&amp;quot;: {
&amp;quot;select2&amp;quot;: &amp;quot;^4.0.5&amp;quot;,
&amp;quot;jsoneditor&amp;quot;: &amp;quot;^5.9.6&amp;quot;
}
And to load it into my bootstrap file:</description></item><item><title>Laravel, Dusk and Valet</title><link>https://alnutile.github.io/posts/221/</link><pubDate>Thu, 28 Sep 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/221/</guid><description>By default I set my phpunit.xml to use test as my database:
&amp;lt;php&amp;gt;
&amp;lt;env name=&amp;quot;APP_ENV&amp;quot; value=&amp;quot;testing&amp;quot;/&amp;gt;
&amp;lt;env name=&amp;quot;CACHE_DRIVER&amp;quot; value=&amp;quot;array&amp;quot;/&amp;gt;
&amp;lt;env name=&amp;quot;SESSION_DRIVER&amp;quot; value=&amp;quot;array&amp;quot;/&amp;gt;
&amp;lt;env name=&amp;quot;MAIL_DRIVER&amp;quot; value=&amp;quot;log&amp;quot;/&amp;gt;
&amp;lt;env name=&amp;quot;QUEUE_DRIVER&amp;quot; value=&amp;quot;sync&amp;quot;/&amp;gt;
&amp;lt;env name=&amp;quot;DB_DATABASE&amp;quot; value=&amp;quot;test&amp;quot;/&amp;gt; &amp;lt;-- this line here &amp;lt;/php&amp;gt;
But with Valet and Dusk this led to the browser using my default database and not test but the PHPUnit test itself was using test so the user I created and logged in as was not available in the browser.</description></item><item><title>WIP AWS Batch and Workers with Laravel</title><link>https://alnutile.github.io/posts/220/</link><pubDate>Wed, 06 Sep 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/220/</guid><description>Sending Docker Commands to Get A Task Done This article will show how to get started with AWS Batch and Docker to spin up a &amp;ldquo;worker&amp;rdquo;
By the time you are done reading it you will:
Have a Docker image to run your command in. Deploy the Docker image to AWS ECR And Run a Task on the AWS Batch system, or a 100 tasks, does not matter. Finally you will have the scripts needed to fully build AWS Batch with CloudFormation, e.</description></item><item><title>Mocking Models OutSide of Laravel</title><link>https://alnutile.github.io/posts/219/</link><pubDate>Thu, 24 Aug 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/219/</guid><description>This all comes down to me using https://github.com/orchestral/testbench
With this in place I can work on an external library as if it is in Laravel.
The one place I ran into trouble on though was mocking model related methods like all for example a model Foo being called as \App\Foo::all() was hard to mock cause all is stacic:
//\Illuminate\Database\Eloquent\Model::all
public static function all($columns = ['*'])
{
return (new static)-&amp;gt;newQuery()-&amp;gt;get(
is_array($columns) ?</description></item><item><title>Versions and Branching a Library</title><link>https://alnutile.github.io/posts/218/</link><pubDate>Tue, 22 Aug 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/218/</guid><description>At work Andrew Cavanagh and I had to, using many examples on of libraries we use, to finalize how to branch and version our libraries.
There should be one branch for each major version (1.0, 2.0, etc).
These should be the only branches besides master.
Releases within these versions should be tagged following semantic versioning guidlines (v1.2.3 for example).
In general, all work should be done via pr from the master branch and then merged into whatever the current branch is.</description></item><item><title>Machine to Machine Laravel Passport</title><link>https://alnutile.github.io/posts/211/</link><pubDate>Fri, 02 Jun 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/211/</guid><description>Recently I needed to create an OAuth around Machine to Machine authentication here
The docs are good but I must have missed something obvious or maybe I just well missed something obvious.
Basically I just kept getting Unauthenticated. and this makes sense since I received the token using
grant_type:client_credentials
client_id:1
client_secret:foobar
So after following the docs I had to then to the following
Route::middleware('auth:api')-&amp;gt;get('/user', function (Request $request) {
return $request;
});
with</description></item><item><title>Dusk and Homestead</title><link>https://alnutile.github.io/posts/209/</link><pubDate>Mon, 24 Apr 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/209/</guid><description>Working on learning Dusk and really excited to get going with it.
But running it in homestead proved to be a bit tricky.
After following the docs and running php artisan dusk not much happened. Sure if I ran it on my Mac and it just worked but my tests needed to do migrations and what not and I want to keep my work in Homestead.
So a few steps later and it worked thanks to this post https://github.</description></item><item><title>Simple Slack Trait Get Request and return Response</title><link>https://alnutile.github.io/posts/208/</link><pubDate>Fri, 24 Mar 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/208/</guid><description>In this example I get a message from Slack (but this can be any message) and then send results back to Slack.
One thing to keep in mind you really want to get your code working out side of Slack since you cannot easily do a push, test, fix, push, test as we normally do when working locally with a browser.
Get your PHPUnit working for a class that will handle the payload, then you know when you plug it in to the Slack Route it will &amp;ldquo;just work&amp;rdquo;.</description></item><item><title>Instantiate Request for Testing</title><link>https://alnutile.github.io/posts/206/</link><pubDate>Tue, 28 Feb 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/206/</guid><description>When I need to make a request for a test in which the Class is expecting a \Illuminate\Http\Request I can do this for a file based or non file based request.
/**
* @Then I should be able to upload an image file
*/
public function iShouldBeAbleToUploadAnImageFile()
{
$request = new \Illuminate\Http\Request();
$file = new \Symfony\Component\HttpFoundation\FileBag();
$path = base_path('tests/fixtures/example_profile.jpg');
$originalName = 'example_profile.jpg';
$upload = new \Illuminate\Http\UploadedFile($path, $originalName, null, null, null, true);
$file-&amp;gt;set('profile_image', $upload);
$request-&amp;gt;files = $file;
$this-&amp;gt;repo = new \App\Repositories\ProfileRepository();
$results = $this-&amp;gt;repo-&amp;gt;uploadUserProfileImage($request);
PHPUnit::assertTrue($results, &amp;quot;Repo did not return true&amp;quot;);
PHPUnit::assertTrue(File::exists(public_path('storage/' .</description></item><item><title>Load Testing With Behat</title><link>https://alnutile.github.io/posts/205/</link><pubDate>Wed, 01 Feb 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/205/</guid><description>The team I am a part of write our tests using Behat for the most part as we try to practice BDD and take advantage of how writing in Gherkin can lead our code to be more inline with the language of the business.
In this case I wanted to replicate some file upload and processing that the system will be doing during a training that will happen next week as 4 users are uploading files and going through the entire process.</description></item><item><title>Example Job Format for Queue</title><link>https://alnutile.github.io/posts/204/</link><pubDate>Sat, 14 Jan 2017 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/204/</guid><description>Sometimes I just need this info to remind myself what a job looks like in a queue and how to mock it etc.
In this case I have a simple class that will be used to dispatch the job.
&amp;lt;?php
namespace App\Jobs;
use Illuminate\Bus\Queueable;
use Illuminate\Queue\SerializesModels;
use Illuminate\Queue\InteractsWithQueue;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Support\Facades\Log;
class RandomWordJob implements ShouldQueue
{
use InteractsWithQueue, Queueable, SerializesModels;
public $payload = [];
public function __construct($payload)
{
$this-&amp;gt;payload = $payload;
}
/**
* Execute the job.</description></item><item><title>LarScanner simple foundation for building a good Laravel Security Scanner</title><link>https://alnutile.github.io/posts/203/</link><pubDate>Thu, 29 Dec 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/203/</guid><description>Just the start to a new library that I hope others will help out on https://github.com/alfred-nutile-inc/larscanner
There is a roadmap in the readme.md but basically how to start adding more and more features on this to protect our applications built in Laravel.</description></item><item><title>Super Simple Sending Messages to Slack from Laravel</title><link>https://alnutile.github.io/posts/202/</link><pubDate>Thu, 29 Dec 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/202/</guid><description>Laravel 5.3 has this feature. But for those not using that version or who just want to see how easy this is, I will show here how I been doing this for some time now.
Here is the main Class I call to send a message. As you can see I am using Guzzle, in this case &amp;quot;guzzlehttp/guzzle&amp;quot;: &amp;quot;^6.1&amp;quot; but others versions can work.
&amp;lt;?php
namespace App\Services;
use Illuminate\Support\Facades\Log;
use GuzzleHttp\Client;
class SlackWrapper
{
/**
* @var Client $client
*/
protected $client;
protected $slack_url = false;
public function __construct(Client $client)
{
$this-&amp;gt;client = $client;
}
public function sendMessageToSlack($message)
{
try {
$this-&amp;gt;client-&amp;gt;request(
'POST',
$this-&amp;gt;getSlackUrl(),
[
'body' =&amp;gt; $this-&amp;gt;message($message)
]
);
} catch (\Exception $e) {
Log::debug(sprintf(&amp;quot;Error sending to Slack %s&amp;quot;, $e-&amp;gt;getMessage()));
}
}
protected function message($message)
{
return json_encode(
[
'text' =&amp;gt; $message
]
);
}
public function getSlackUrl()
{
if (!</description></item><item><title>Pusher and PHP 'Error Failed to connect to Pusher'</title><link>https://alnutile.github.io/posts/201/</link><pubDate>Mon, 28 Nov 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/201/</guid><description>Note to self. Getting this error &amp;ldquo;Error Failed to connect to Pusher&amp;rdquo; but the front end is working. And you know your credentials are correct, AND it was working just a day ago check the date and time on your machine/vm.
Mine had drift and since it was behind by 20 minutes I would end up with this error.
Oy what a waste or time x 2 :(</description></item><item><title>Model Boot Events</title><link>https://alnutile.github.io/posts/200/</link><pubDate>Sun, 20 Nov 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/200/</guid><description>Just a quick not to modify model data upon an event. Laravel docs talk about it here
But putting it in another class can get kinda confusing when you are trying to debug or update the code.
In this example I have a model Board and I want to, upon saving, make sure it has some key data.
protected static function boot()
{
static::bootTraits();
/** @var \App\Board $model */
static::creating(function ($model) {
if (!</description></item><item><title>Queue onConnection</title><link>https://alnutile.github.io/posts/199/</link><pubDate>Mon, 14 Nov 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/199/</guid><description>If you look here https://laravel.com/docs/5.3/queues#customizing-the-queue-and-connection
Under &amp;ldquo;Dispatching To A Particular Connection&amp;rdquo;
But if running test and local where I just want sync or database
if(env('QUEUE_DRIVER') != 'sync' &amp;amp;&amp;amp; env('QUEUE_DRIVER') != 'database') {
$concentration_curve = (new ImportDataColumnWorker($this-&amp;gt;job_notice-&amp;gt;model, $this-&amp;gt;job_notice-&amp;gt;payload))
-&amp;gt;onConnection('columns');
} else {
$concentration_curve = (new ImportDataColumnWorker($this-&amp;gt;job_notice-&amp;gt;model, $this-&amp;gt;job_notice-&amp;gt;payload));
}
$this-&amp;gt;dispatch($concentration_curve);</description></item><item><title>Laravel and Casting 'JSON_UNESCAPED_UNICODE' Data</title><link>https://alnutile.github.io/posts/196/</link><pubDate>Thu, 03 Nov 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/196/</guid><description>Had a interesting issue with Laravel and the cast feature
Basically a Chinese set of characters would be converted to their unicode counterpart http://php.net/manual/en/json.constants.php
So saving &amp;ldquo;你好，世界&amp;rdquo; would become &amp;ldquo;\u4f60\u597d\uff0c\u4e16\u754c&amp;rdquo; in the database.
Making it hard to search for &amp;ldquo;你好，世界&amp;rdquo;
But I just wanted this data as it was, so later I could query the data and interact with it in it&amp;rsquo;s default character state.
Digging into the Model class vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.</description></item><item><title>Laravel Throttle Feature using IP address as Key</title><link>https://alnutile.github.io/posts/193/</link><pubDate>Sun, 16 Oct 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/193/</guid><description>NOTE: 5.3, for 5.2 see ending update
The Laravel Throttle feature here is a great addition to the framework. By default it uses the username and the IP for the key to count attempts.
But I want to cover how to switch that to use an IP only and not the username. A good example of why is a hacker running through a list of emails and passwords just trying to break into sites where that user would use the same password as the site the got the list from.</description></item><item><title>Throttle Password Reset</title><link>https://alnutile.github.io/posts/194/</link><pubDate>Sun, 16 Oct 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/194/</guid><description>Laravel Throttle works on failed auth attempts but how about password resets?
Here is what I made my app/Http/Controllers/Auth/PasswordController.php look like
5.3 &amp;lt;?php
namespace App\Http\Controllers\Auth;
use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\AuthenticatesUsers;
use Illuminate\Foundation\Auth\ResetsPasswords;
use Illuminate\Foundation\Auth\ThrottlesLogins;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Validator;
class PasswordController extends Controller
{
/*
|--------------------------------------------------------------------------
| Password Reset Controller
|--------------------------------------------------------------------------
|
| This controller is responsible for handling password reset requests
| and uses a simple trait to include this behavior.</description></item><item><title>Mockery Behat and Laravel</title><link>https://alnutile.github.io/posts/190/</link><pubDate>Wed, 31 Aug 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/190/</guid><description>This is a quick view of using this library https://github.com/laracasts/Behat-Laravel-Extension and a Mockery Trait (should be included soon but for now put the below in your features/bootstrap folder and run composer dump).
The example here is a method that looks like this
features/bootstrap/ExampleContext.php
$partial = Mockery::mock(\App\Broadcasts\ColumnsAndRowsDoneProcessingEmail::class, [$this-&amp;gt;segment])-&amp;gt;makePartial();
$partial-&amp;gt;shouldReceive('sendEmail')-&amp;gt;never();
$repo = App::make(\App\JobsRepository::class);
$partial-&amp;gt;handle($repo);
When this is done running I would get pass BUT if I change it never to once and run it again I still get green :(</description></item><item><title>Uploading Images in Behat both at Domain Level and UI Level</title><link>https://alnutile.github.io/posts/188/</link><pubDate>Thu, 11 Aug 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/188/</guid><description>The goal here is as follows
@fileCleanup @javascript
Scenario: Uploading File
Given I already made a Segmentation and am editing it
Then I add file and the system will process it
And I can not add another file till it is done
And when the system is done I can add another file
In this case they are large files and I want to get an MVP for the users to interact with so one file at a time is enough for now.</description></item><item><title>Behat Laravel Domain Testing Inside Out</title><link>https://alnutile.github.io/posts/187/</link><pubDate>Wed, 10 Aug 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/187/</guid><description>I will cover the use of FormRequest, Mockery, Behat and more in this article.
The article will show how to test your Domain code, in this case I mean testing how the code will work outside of the Routing and Controller layer of your Application. But what this will lead to is a &amp;ldquo;lego&amp;rdquo; like moment of plugging in these parts to your Controller so you know it will work. Of course it will be tested as well during the UI testing.</description></item><item><title>Example of Mixing it up Behat BDD and PHPUnit</title><link>https://alnutile.github.io/posts/185/</link><pubDate>Thu, 23 Jun 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/185/</guid><description>Just wanted to show two things here. One is how sometimes I end up in PHPUnit to work out some ideas. And two how awesome it is to refactor thanks to PHPUnit.
In this example I had a Class responsible for saving data, we&amp;rsquo;ll call FooSaveData. But before that save it has to process some incoming information against another set of data to save the results of that. So I made another class we&amp;rsquo;ll call FooProcessData.</description></item><item><title>Homestead and Auto Setup Hosts File</title><link>https://alnutile.github.io/posts/184/</link><pubDate>Sun, 05 Jun 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/184/</guid><description>I discovered this Vagrant Plugin https://github.com/cogitatio/vagrant-hostsupdater thanks to https://github.com/cogitatio/vagrant-hostsupdater when setting up Windows and thought why can&amp;rsquo;t I use it on my Mac?
Just like the docs say on their github site
vagrant plugin install vagrant-hostsupdater
Then update your ruby file that setups up homestead
subl ~/Homestead/scripts/homestead.rb
This will look like Then
subl ~/.homestead/Homestead.yaml
And make that like this
Then run provision
cd ~/Homestead
vagrant provision
That is it now your /etc/hosts file will look like this</description></item><item><title>API Token Based Access Laravel 5.1 (Yet another article on this)</title><link>https://alnutile.github.io/posts/183/</link><pubDate>Tue, 31 May 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/183/</guid><description>API Token Laravel 5.2 introduces the auth token guard setup which is way simpler than Oauth. Also it does not assume a certain level of complexity in needs like Scopes and expirations of tokens that we do not need for our internal app to app communications.
We are using 5.1 so this will implement it.
See some docs here https://gistlog.co/JacobBennett/090369fbab0b31130b51
For creating a user the AppServiceProvider boots the user record and if no api_token is present it will set one.</description></item><item><title>Laravel, PHPUnit, Require_Once on Routes</title><link>https://alnutile.github.io/posts/178/</link><pubDate>Tue, 22 Mar 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/178/</guid><description>Going crazy running PHPUnit all and getting fail but you run the one route and it works!
The difference is require versus require_once in PHPUnit tests.
For example
require __DIR__ . '/../ConfigurationExamples/routes.php';
Route::get('/', function () {
return view('welcome');
});
Now when I run my tests I get 100% pass
/**
* @test
*/
public function should_auth_user()
{
$user = factory(\App\User::class)-&amp;gt;create();
$results = $this-&amp;gt;call('GET', sprintf(&amp;quot;/example/auth_token?api_token=%s&amp;quot;, $user-&amp;gt;api_token));
$this-&amp;gt;assertEquals(200, $results-&amp;gt;status());
$this-&amp;gt;assertEquals(&amp;quot;foo&amp;quot;, $results-&amp;gt;getContent());
}
/**
* @test
*/
public function should_fail_user()
{
$results = $this-&amp;gt;call('GET', '/example/auth_token');
$this-&amp;gt;assertEquals(302, $results-&amp;gt;status());
}
/**
* @test
*/
public function should_pass_auth_with_no_token()
{
$user = factory(\App\User::class)-&amp;gt;create();
$this-&amp;gt;be($user);
$results = $this-&amp;gt;call('GET', '/example/auth_token');
$this-&amp;gt;assertEquals(200, $results-&amp;gt;status());
$this-&amp;gt;assertEquals(&amp;quot;foo&amp;quot;, $results-&amp;gt;getContent());
}
The moment I change it to require_once I get fails on the last or second to last one, it is not consistant except that it will fail.</description></item><item><title>Remote Behat Testing with Laravel</title><link>https://alnutile.github.io/posts/177/</link><pubDate>Wed, 03 Feb 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/177/</guid><description>Listen Here
This document will cover how to use a Behat specific API to setup a site for testing. What this includes is setting up a Scenario so that it has the data you need to run a test. This makes it possible not to rely on Seed data for this. This will allow us to run behat tests from remote machines as well as run tests in parallel.
Why not seed data?</description></item><item><title>CMS or NOT CMS</title><link>https://alnutile.github.io/posts/176/</link><pubDate>Sun, 31 Jan 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/176/</guid><description>This video just shows and example of a NOT CMS we built for a client. Sure they can add content and manage it BUT they did not need all the extra features that come with Wordpress or Drupal like workflows, versioning, intricate roles etc.
Also they had a huge need to easily deploy all of this work. For example the Help system can have updates deployed to all of the sites via one Github commit.</description></item><item><title>Feature Flags In Laravel</title><link>https://alnutile.github.io/posts/175/</link><pubDate>Tue, 26 Jan 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/175/</guid><description>Overview Library is https://github.com/friendsofcat/laravel-feature-flag/
Listen here
Watch https://youtu.be/4nq7FyHQj8I
We are working on using FeatureFlags or Toggles in our applications. For one we are aiming to do all our work on mainline branch at all times so this would be a key coding discipline to use FeatureFlags so we can hide a feature in progress knowing it will not interfere with the application. For example if a hotfix or another feature is ready to go to production we can push that with no worries of the in progress feature.</description></item><item><title>Slack Custom Commands and Laravel to Make an American to British Translater</title><link>https://alnutile.github.io/posts/173/</link><pubDate>Sun, 17 Jan 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/173/</guid><description>Laravel or anything you are comfortable with making a Route and Response will work fine really.
This &amp;ldquo;messaging as a platform&amp;rdquo; is a new world for me, challenging my way of thinking in many ways. Some things just do not need a authentication of their own, a UI, etc they just need a place to get info from, or do something with some info etc.
In this case I made a really simple &amp;ldquo;Custom Slash Command&amp;rdquo; to translate British Slang to American and American to British (so I can sound cooler!</description></item><item><title>Put It All Into Version Control Even Composer!</title><link>https://alnutile.github.io/posts/171/</link><pubDate>Tue, 05 Jan 2016 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/171/</guid><description>Update: September 06 2016
We stopped doing this. I do not think it is a bad idea but we ended up going with CodeDeploy on AWS. So after our CI does a Composer install and all passes, CodeDeploy will just bundle everything up as a Zip file and deploy that to the server.
Or Listen here
Another article about this written by Loran Jane Mitchell Using Composer Without GitIgnoring Vendor</description></item><item><title>Logout User After Inactivity Laravel and Milddleware</title><link>https://alnutile.github.io/posts/168/</link><pubDate>Sat, 14 Nov 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/168/</guid><description>Original Post http://laravel-tricks.com/tricks/session-timeout-for-logged-in-user
This Middleware made it super easy to satisfy a requirement to log the user out after 15 minutes of in activity.
I added only a few touchups.
One was the getTimeOut this was so I can work locally and override this by setting it to a large number. I could even use it to just bypass the whole things for a bit since on local I rather not deal with this.</description></item><item><title>CentOS or RedHat and Laravel</title><link>https://alnutile.github.io/posts/167/</link><pubDate>Thu, 05 Nov 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/167/</guid><description>Got Ideas from here An Ansible Tutorial
Just wrapped up setting up two RedHat servers (version 7) and one CentOS Virtual box so I could deploy a Laravel site.
Code is here
Thanks to Ansible it was not as bad as it could have been.
I am not an ansible expert just getting into it as we need to do this more. What these scripts will do is
Setup a CentOS Vagrant box Setup a Server for Laravel and Queues SupervisorD Setup up SSHD to be key based only you can remove this Setup Cron to run scheduler Setup SSL if you make the keys for this Redirect to https for site Local VM Step one is to install Ansible on your Mac and then vim /etc/ansible/hosts</description></item><item><title>Quick Tip Forcing More Complex Passwords in Laravel</title><link>https://alnutile.github.io/posts/166/</link><pubDate>Wed, 21 Oct 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/166/</guid><description>With the great Laravel Docs I will quickly show how to &amp;ldquo;encourage&amp;rdquo; the user to set a better password.
Going through the standard docs for Authentication we end up with a registration form.
Then in the AuthController that comes with Laravel I modify it a bit.
protected function validator(array $data)
{
$messages = ['password.regex' =&amp;gt; &amp;quot;Your password must contain 1 lower case character 1 upper case character one number&amp;quot;];
return Validator::make($data, [
'name' =&amp;gt; 'required|max:255',
'email' =&amp;gt; 'required|email|max:255|unique:users',
'password' =&amp;gt; 'required|confirmed|min:8|regex:/^(?</description></item><item><title>Image Uploads, Laravel, Angular and Flow.js</title><link>https://alnutile.github.io/posts/165/</link><pubDate>Fri, 18 Sep 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/165/</guid><description>Here is one combination out of many to make this happen.
The libraries are
https://github.com/flowjs/ng-flow
and
https://github.com/flowjs/flow-php-server
Model and Imageable Resource What I like about this is we can make 1 controller to manage uploads. That controller will upload the file, place it into the correct folder, and setup the relationship to the resource.
In this example the Resource will be a Contact.
So I then follow Laravel docs to create the Polymorphic Imageable/Photo example http://laravel.</description></item><item><title>Spark Setup Issue</title><link>https://alnutile.github.io/posts/163/</link><pubDate>Tue, 15 Sep 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/163/</guid><description>During the install https://github.com/laravel/spark I kept getting this error
Problem 1
- Installation request for laravel/spark-installer ~1.0 -&amp;gt; satisfiable by laravel/spark-installer[v1.0.0].
- Conclusion: remove illuminate/support v4.2.17
- laravel/spark-installer v1.0.0 requires illuminate/support ~5.0 -&amp;gt; satisfiable by illuminate/support[v5.0.0, v5.0.22, v5.0.25, v5.0.26, v5.0.28, v5.0.33, v5.0.4, v5.1.1, v5.1.13, v5.1.16, v5.1.2, v5.1.6, v5.1.8].
- Can only install one of: illuminate/support[v5.0.0, v4.2.17].
- Can only install one of: illuminate/support[v5.0.22, v4.2.17].
- Can only install one of: illuminate/support[v5.</description></item><item><title>Adding Expose IDS to Laravel MiddleWare</title><link>https://alnutile.github.io/posts/162/</link><pubDate>Thu, 03 Sep 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/162/</guid><description>The library is https://github.com/enygma/expose
&amp;ldquo;Expose is an Intrusion Detection System for PHP loosely based on the PHPIDS project (and using it&amp;rsquo;s ruleset for detecting potential threats).&amp;rdquo;
After seeing it in the latest PHPArch magazine on security I wanted to give it a try.
Of course this is far from a complete look.
Step 1 Make the MiddleWare
php artisan make:middleware ExposeMiddleware
Then add Expose as noted in the docs.</description></item><item><title>Note To Self: A VirtualBox machine with the name 'homestead' already exists.</title><link>https://alnutile.github.io/posts/161/</link><pubDate>Sat, 29 Aug 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/161/</guid><description>Since I know this will happen again I want to remind myself and others how to fix it.
I had this error A VirtualBox machine with the name 'homestead' already exists. when doing my normal vagrant up. I got some help at http://stackoverflow.com/questions/26993903/a-virtualbox-machine-with-the-name-homestead-already-exists but it was not made too clear.
Here are the exact steps for me to fix this
Run vboxmanage list vms
This will output a list
&amp;quot;homestead&amp;quot; {5dc30604-8ebe-4060-8966-4881958e6bf5}
&amp;quot;boot2docker-vm&amp;quot; {38af33d4-7ebc-4498-a80e-39711a08b413}
&amp;quot;settler_default_1434987271004_24349_1440846292799_16470&amp;quot; {2c80bf94-99b8-4b51-95a0-034dddae8c33}
Then I took the id of homestead 5dc30604-8ebe-4060-8966-4881958e6bf5 and did</description></item><item><title>Laravel and Angular Widgets e.g. Non SPA (Single Page Application) Pattern</title><link>https://alnutile.github.io/posts/160/</link><pubDate>Wed, 26 Aug 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/160/</guid><description>Not all apps need to be an SPA (Single Page Application). Sure they have their place but in most cases the task might benefit from just a Blade template and Angular widget. This saves you from having to write an angular route which can be a tedious duplication of work. Also Blade is fast and fun to work with.
Step One Add Data to Global Window Using the Transform PHP Vars to JavaScript you can easily start to inject some content into your templates, if needed, to setup the data your Angular widget can use to build out it&amp;rsquo;s elements.</description></item><item><title>Laravel 5.1 and Oauth</title><link>https://alnutile.github.io/posts/159/</link><pubDate>Fri, 14 Aug 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/159/</guid><description>Laravel 5.1 and Oauth2 Server Video coming soon&amp;hellip;
Example repo is here https://github.com/alnutile/oauth_how_to
The library we will use is
https://github.com/lucadegasperi/oauth2-server-laravel
This will setup a server both client_type and password_type for Grant Types.
Coming to Terms with Oauth Coming to terms with this stuff is long and tedious. The docs are here https://github.com/lucadegasperi/oauth2-server-laravel/ wiki will help and then these lead to the League docs as well http://oauth2.thephpleague.com/
There is also a podcast interview with the Alex Bilbie who made the League Oauth Library http://fullstackradio.</description></item><item><title>Talking to the Methods Not the Properties</title><link>https://alnutile.github.io/posts/158/</link><pubDate>Wed, 12 Aug 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/158/</guid><description>Just a team related style guide item.
When talking to properties in a class talk via a getter.
&amp;lt;?php
class Foo {
protected $client;
function bar()
{
return $this-&amp;gt;client-&amp;gt;getAll();
}
}
Would then become
&amp;lt;?php
class Foo {
protected $client;
function bar()
{
return $this-&amp;gt;getClient-&amp;gt;getAll();
}
function getClient()
{
return $this-&amp;gt;client;
}
}
There are a few reasons for this
Consistent style for the team Changes to that property can be done in one place.</description></item><item><title>Using your project docs inside the application</title><link>https://alnutile.github.io/posts/157/</link><pubDate>Wed, 05 Aug 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/157/</guid><description>The applications I work on have markdown docs. These can be in the docs/ folder for example as docs/webhooks.md
But some of these docs have value to the user of the UI not just the developer, and when we include these docs inside the application repo it is a TON easier to just update them as you fix and make new features in the codebase.
You can have the best of both worlds with a simple to use library https://github.</description></item><item><title>HasMany Through a Many to Many</title><link>https://alnutile.github.io/posts/155/</link><pubDate>Wed, 29 Jul 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/155/</guid><description>This thread helped a lot http://laravel.io/forum/03-04-2014-hasmanythrough-with-many-to-many
In the end I had this query
class MetaData extends Model {
public function meta_values()
{
return $this-&amp;gt;belongsToMany(\App\MetaValue::class);
}
public function meta_data_types()
{
return $this-&amp;gt;belongsToMany(\App\MetaValue::class)
-&amp;gt;leftJoin('meta_data_type_meta_value', 'meta_values.id', '=', 'meta_data_type_meta_value.meta_value_id')
-&amp;gt;leftJoin('meta_data_types', 'meta_data_types.id', '=', 'meta_data_type_meta_value.meta_data_type_id')
-&amp;gt;groupBy('meta_data_types.id')
-&amp;gt;select('meta_data_types.*');
}
Model meta_data_types had not direct relation to this MetaData model class. But MetaData did relate to meta_values.
So using that info I could get the related MetaValues and then the related MetaDataTypes and that was it.</description></item><item><title>Adding RSS to Your Site</title><link>https://alnutile.github.io/posts/154/</link><pubDate>Sun, 12 Jul 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/154/</guid><description>Using this library https://packagist.org/packages/thujohn/rss
We simply install but using a forked version so it works with L5
&amp;quot;require&amp;quot;: {
&amp;quot;php&amp;quot;: &amp;quot;&amp;gt;=5.5.9&amp;quot;,
&amp;quot;laravel/framework&amp;quot;: &amp;quot;5.1.*&amp;quot;,
&amp;quot;thujohn/rss&amp;quot;: &amp;quot;dev-master&amp;quot;
},
&amp;quot;repositories&amp;quot;: [
{
&amp;quot;type&amp;quot;: &amp;quot;vcs&amp;quot;,
&amp;quot;url&amp;quot;: &amp;quot;https://github.com/majortom731/rss-l4.git&amp;quot;
}
],
composer update
And as they note in the docs
'providers' =&amp;gt; array(
'Thujohn\Rss\RssServiceProvider',
)
Now in my route I simply put
Route::get('feed', function() {
$feed = Thujohn\Rss\RssFacade::feed('2.0', 'UTF-8');
$feed-&amp;gt;channel(array('title' =&amp;gt; 'Incomings.io Blog and News', 'description' =&amp;gt; 'Latest News and Blog postings for Incomings.</description></item><item><title>Bower and Elixir</title><link>https://alnutile.github.io/posts/153/</link><pubDate>Tue, 07 Jul 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/153/</guid><description>Trying to make this workflow more easy. Right now it seems that since bower ends up putting all assets into bower_components (css and js) and elixir wants assets by default in resources/assets/css and js that I need to have an easy way to get the files via bower and then get them to the needed folders.
For most project we actually leave the files in the git repo for faster ui testing builds and we rarely run updates but when we do it would be nice for bower to also be able to work and not mess any of the above settings not cause me to have to manually move files around.</description></item><item><title>Quick way to Request Json from Angular and return from Laravel</title><link>https://alnutile.github.io/posts/152/</link><pubDate>Mon, 06 Jul 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/152/</guid><description>I simply want to make sure to return json from my app more easily even on errors. So in Angular I set my app.js as such
(function(){
'use strict';
angular.module('app', []);
angular.module('app').run(
function($http)
{
$http.defaults.headers.common.Accept = 'application/json';
}
);
})();
Then in my Laravel routes I can
public function index(Request $request)
{
$blogs = Blog::orderBy('created_at', 'desc')-&amp;gt;paginate(5);
$customPagination = new CustomPagination($blogs);
if($request-&amp;gt;header('Accept') == 'application/json')
return $blogs;
return view('blogs.index', compact('blogs', 'customPagination'));
}
Then I can share the same route with Angular that I do with my Blade templates as needed.</description></item><item><title>Laravel 5.1 Behat and Codeship</title><link>https://alnutile.github.io/posts/151/</link><pubDate>Sat, 04 Jul 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/151/</guid><description>The new integration testing features with Laravel 5.1 make Behat almost not needed BUT we do a lot of AngularJs work and instead of using karma to test the ui we enjoy using behat since we like the Gherkin Syntax and how we can easily code custom steps in PHP.
Here are some steps to getting behat going on Codeship so you get full CI even of Angular.
This is all based off of https://github.</description></item><item><title>Conventions to Help Minimize your ENV File</title><link>https://alnutile.github.io/posts/150/</link><pubDate>Tue, 09 Jun 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/150/</guid><description>UPDATE
I think we can also do AWS_BUCKET=foo_$APP_ENV directly in the env file, see https://mattstauffer.co/blog/laravel-5.0-environment-detection-and-environment-variables
Andrew Cavanagh The .env file can be a real pain and get pretty big. And even though there is a tool, I made :), to move it around easily here is a thought on reducing it a bit so it is the same on all environments.
Typically we have dev, stage, production, testing and local.</description></item><item><title>Codeship and Laravel for Continuous Integration</title><link>https://alnutile.github.io/posts/148/</link><pubDate>Sun, 07 Jun 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/148/</guid><description>Getting going on Codeship and Laravel is pretty easy.
Once you setup codeship to work with your github account just pull in your repo and set your Testing scripts as follows. (they have a ui for ENV variables as well)
Codeship Testing Settings [easier copy paste bottom of article] You can do this in their UI as well. But at this point I am
Setting up the composer token for any private repos that application might have Setting up .</description></item><item><title>Start to end Billing using Stripe, Cashier and Laravel 5.1</title><link>https://alnutile.github.io/posts/149/</link><pubDate>Sun, 07 Jun 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/149/</guid><description>Start to end Billing and Laravel As usual the Laravel docs rock but sometimes it is nice to see this from start to end.
With that said read those docs first and then come back here. Also the public repo can be seen here
Setup your Stripe Yup this is easy. Note the test/live dash board. Super nice to see the different processes.
Turn it to test and make your plans.</description></item><item><title>Logging in Iron.io Workers</title><link>https://alnutile.github.io/posts/147/</link><pubDate>Thu, 04 Jun 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/147/</guid><description>Previously I wrote about how to use Lumen and Iron.io this adds to that by modifying the logging technique.
As noted the worker is basically a class that sets things up, hands off the payload to the handler and returns the results.
&amp;lt;?php
use App\CompareFuseHandler;
use Illuminate\Support\Facades\App;
use Illuminate\Support\Facades\File;
use Illuminate\Support\Facades\Log;
require_once __DIR__ . '/libs/bootstrap.php';
$payload = getPayload(true);
fire($payload);
function fire($payload)
{
$logs = storage_path('logs/lumen.log');
Log::info(sprintf(&amp;quot;Starting Worker at %s&amp;quot;, \Carbon\Carbon::now()));
try
{
//Empty Logs
$handler = App::make('App\CompareFuseHandler');
$handler-&amp;gt;handle($payload);
echo &amp;quot;Success See Logs Below: \n&amp;quot;;
Log::info(sprintf(&amp;quot;Ending Worker at %s&amp;quot;, \Carbon\Carbon::now()));
echo File::get($logs);
}
catch(\Exception $e)
{
echo &amp;quot;Error See Logs Below: \n&amp;quot;;
Log::info(sprintf(&amp;quot;Ending Worker at %s&amp;quot;, \Carbon\Carbon::now())); echo File::get($logs);
}
}
The nice thing about above is that all throughout my handler class I can start the do Log::info('foo') to store up a report for the end of the process on either Success or Error.</description></item><item><title>Writing Commands and Scheduling in Laravel 5.1</title><link>https://alnutile.github.io/posts/146/</link><pubDate>Fri, 29 May 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/146/</guid><description>Wow, writing Artisan Commands just become even easier. And plugging it into Scheduler makes for a great combination.
For example we need to clean out a folder every so many minutes. The example below I also for fun play around with progress and table output.
Note too protected $signature = 'approve:cleanuploads {--minutes=10}'; simplifies theargument and options features.
&amp;lt;?php namespace App\Console\Commands;
use Carbon\Carbon;
use Illuminate\Console\Command;
use Illuminate\Support\Facades\File;
class CleanUploadsCommands extends Command
{
protected $rootPath = 'public/storage';
protected $maxMinutes = 10;
protected $deleted = [];
protected $signature = 'approve:cleanuploads {--minutes=10}';
protected $description = 'Clean all the uploads in the storage folder for security reasons';
protected $pdfFiles = [];
protected $files = [];
public function __construct()
{
parent::__construct();
}
public function handle()
{
$this-&amp;gt;maxMinutes = $this-&amp;gt;option('minutes');
$this-&amp;gt;anyPdfFilesHere();
$this-&amp;gt;deletePdfFiles();
$this-&amp;gt;outputResults();
}
protected function anyPdfFilesHere()
{
$this-&amp;gt;files = File::allFiles(base_path($this-&amp;gt;rootPath));
foreach($this-&amp;gt;files as $file)
{
if (File::mimeType($file) == 'application/pdf')
{
$this-&amp;gt;pdfFiles[] = $file;
}
}
}
private function deletePdfFiles()
{
if(count($this-&amp;gt;pdfFiles) &amp;gt; 0)
{
$this-&amp;gt;output-&amp;gt;progressStart(count($this-&amp;gt;pdfFiles));
foreach($this-&amp;gt;pdfFiles as $file)
{
$modified = File::lastModified($file);
$minutes = Carbon::createFromTimestamp($modified)-&amp;gt;diffInMinutes();
if($minutes &amp;gt; $this-&amp;gt;maxMinutes)
{
$this-&amp;gt;setDeleted(['filename' =&amp;gt; $file]);
File::delete($file);
$this-&amp;gt;output-&amp;gt;progressAdvance();
}
}
}
}
private function outputResults()
{
if(count($this-&amp;gt;deleted) &amp;gt; 0)
{
$this-&amp;gt;output-&amp;gt;progressFinish();
$headers = ['File Name and Path'];
$this-&amp;gt;table($headers, $this-&amp;gt;getDeleted());
}
else
{
$this-&amp;gt;comment(sprintf(&amp;quot;No files older than %d minutes&amp;quot;, $this-&amp;gt;maxMinutes));
}
}
public function getDeleted()
{
return $this-&amp;gt;deleted;
}
public function setDeleted($deleted)
{
$this-&amp;gt;deleted[] = $deleted;
}
}
Then in the Kernel.</description></item><item><title>Easily Create Fixture Data from Remote Services and Refresh Mock Data</title><link>https://alnutile.github.io/posts/145/</link><pubDate>Wed, 27 May 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/145/</guid><description>Oops Codeship and Laravel is here
Easily Create Fixture Data from Remote Services and Refresh Mock Data We have integration tests that hit remote apis like Github, S3, DynomoDB, our own APIs etc and we do not want to hit those during out tests but we also want to make sure we have the real data. So when one of those APIs change then our mock data can be refreshed to see if our systems really work with it.</description></item><item><title>Adding Cache to your Laravel Site</title><link>https://alnutile.github.io/posts/144/</link><pubDate>Fri, 22 May 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/144/</guid><description>Using Laravel&amp;rsquo;s built in Cache facade is super easy. I will quickly cover how to use it for showing your Posts and showing a Post.
Example 1 Show a Post This example will first check the Cache to see if there is a match for post_ID of the post if not it will make one. Also I happen to do the same for the sidebar.
public function show($id)
{
$post = Cache::rememberForever('post_' .</description></item><item><title>Iron.io and Lumen</title><link>https://alnutile.github.io/posts/143/</link><pubDate>Tue, 28 Apr 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/143/</guid><description>Lumen Iron Worker What and why A worker is a great way to run tasks as needed taking the load off your applications server and greatly speeding up the process of a task as you can run numerous workers at once.
A lot of this comes from http://dev.iron.io/worker/beta/getting_started/ and http://dev.iron.io/worker/beta/cli/ and their examples
Topics covered Creating a Lumen Worker Creating a statically linked binary in the worker Testing the worker locally with Docker Entering your docker environment Design patterns Install Lumen composer create-project laravel/lumen --prefer-dist
Add to composer.</description></item><item><title>Quick way to mock data for Behat in Laravel</title><link>https://alnutile.github.io/posts/142/</link><pubDate>Mon, 30 Mar 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/142/</guid><description>Below allows me to use this type of step in my tests
Scenario: Given I update a Domain get 200 Given I mock &amp;quot;App\Sites\Domain&amp;quot; with properties: &amp;quot;&amp;quot;&amp;quot;
id: &amp;quot;mock-update-1&amp;quot;
site_id: &amp;quot;mock-site-1&amp;quot;
domain: &amp;quot;foo2.com
&amp;quot;&amp;quot;&amp;quot;
Given I have the payload: &amp;quot;&amp;quot;&amp;quot;
{
&amp;quot;data&amp;quot;:
{
&amp;quot;id&amp;quot;: &amp;quot;mock-update-1&amp;quot;,
&amp;quot;site_id&amp;quot;: &amp;quot;mock-site-1&amp;quot;,
&amp;quot;domain&amp;quot;: &amp;quot;foo2.com&amp;quot;
}
}
&amp;quot;&amp;quot;&amp;quot;
Then I request &amp;quot;PUT /api/v1/sites/mock-site-1/domains/mock-update-1&amp;quot;
Then I get a &amp;quot;200&amp;quot; response Here is the code in my FeatureContext.php</description></item><item><title>Code for making a Shortcut tool for your App</title><link>https://alnutile.github.io/posts/141/</link><pubDate>Sun, 29 Mar 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/141/</guid><description>This allows the user to easily make shortcuts to urls they are on and give them names.
video
The Migration &amp;lt;?php
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
class CreateShortcutsTable extends Migration {
/**
* Run the migrations.
*
* @return void
*/
public function up()
{
Schema::create('shortcuts', function(Blueprint $table)
{
$table-&amp;gt;string('id', 36)-&amp;gt;primary();
$table-&amp;gt;string('url');
$table-&amp;gt;string('name');
$table-&amp;gt;string('user_id', 36);
$table-&amp;gt;timestamps();
});
}
/**
* Reverse the migrations.
*
* @return void
*/
public function down()
{
Schema::drop('shortcuts');
}
}
The Model You will see me using scopes as I wanted to make a really simple POC</description></item><item><title>PHP Error: Maximum function nesting level of '100' reached, aborting Behat</title><link>https://alnutile.github.io/posts/137/</link><pubDate>Fri, 13 Mar 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/137/</guid><description>This started to happen on Codeship and local for me and other developers. Though one developer had a higher setting for max nesting as noted here I wanted to not worry about this so I just locked down Symfony and Behat in our composer.json file
&amp;quot;require-dev&amp;quot;: {
&amp;quot;symfony/dependency-injection&amp;quot;: &amp;quot;2.7.x-dev#9fcd589dfb67697f1e3e34611b97eb1be2cd85be&amp;quot;,
&amp;quot;php-vcr/php-vcr&amp;quot;: &amp;quot;dev-master&amp;quot;,
&amp;quot;phpunit/phpunit&amp;quot;: &amp;quot;~4.0&amp;quot;,
&amp;quot;phpspec/phpspec&amp;quot;: &amp;quot;~2.1&amp;quot;,
&amp;quot;php-vcr/phpunit-testlistener-vcr&amp;quot;: &amp;quot;dev-master&amp;quot;,
&amp;quot;mockery/mockery&amp;quot;: &amp;quot;*@dev&amp;quot;,
&amp;quot;fzaninotto/faker&amp;quot;: &amp;quot;*&amp;quot;,
&amp;quot;guzzlehttp/guzzle&amp;quot;: &amp;quot;4.*&amp;quot;,
&amp;quot;pda/pheanstalk&amp;quot;: &amp;quot;~3.0&amp;quot;,
&amp;quot;knplabs/github-api&amp;quot;: &amp;quot;1.2.1&amp;quot;,
&amp;quot;way/generators&amp;quot;: &amp;quot;~3.0&amp;quot;,
&amp;quot;symfony/Yaml&amp;quot;:&amp;quot;2.</description></item><item><title>Iron.io Laravel and Workers, Microservices</title><link>https://alnutile.github.io/posts/136/</link><pubDate>Mon, 09 Mar 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/136/</guid><description>We are starting to use Iron.io and their workers for a lot of the tasks that our apps need to do. For example one app needs to scan websites for images and text and report on them. In our case that is 2 workers, one with the code needed to get the text we want and the other images. Another worker runs behat tests to take screenshots and reports back to the called with the results.</description></item><item><title>Sending Dates to Angular from Laravel</title><link>https://alnutile.github.io/posts/134/</link><pubDate>Tue, 24 Feb 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/134/</guid><description>This might not be ideal but so far it allows me to more easily sort dates and filter dates in Angular.
From the Laravel model I add these two methods
/**
* See docs http://laravel.com/docs/5.0/eloquent#date-mutators
*/
public function getDates()
{
return array('created_at');
}
public function getCreatedAtAttribute($attr) {
return Carbon::parse($attr)-&amp;gt;timestamp; //Change the format to whichever you desire
}
Then in Angular I can use the filters
{{ vm.created_at | date:'medium'}}</description></item><item><title>Dealing with Oauth2 Server and Laravel for both a local app login and for remote apps using Lucadegasperi/oauth2-server-laravel</title><link>https://alnutile.github.io/posts/133/</link><pubDate>Mon, 23 Feb 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/133/</guid><description>This is all based around this library https://github.com/lucadegasperi/oauth2-server-laravel
I am building and API to be used by an iOs and Android client I will be making soon. But I also needed the filter system to deal with my local Laravel view that was using the api via an Angular driven widget so the user can go to the website as well.
So the website is where the user can go to do change settings, subscription updates etc, but in that case they are logged in via the Laravel login form.</description></item><item><title>Simple Look at Laravel Events</title><link>https://alnutile.github.io/posts/132/</link><pubDate>Sun, 08 Feb 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/132/</guid><description>Events Getting Started This is part of a larger Laravel Guide I am working on in this case the example is in the Events folder
Start the example
php artisan serve --port=8081
Then visit
http://localhost:8081/example1
So if you look in
app/routes.php
You see route example1 will fire and event and there are two listeners
Do they run async or sync If you hit that route you see the sleep taking effect so it is syncronous</description></item><item><title>Laravel-Flysystem and Creating Time Limited Public Urls on S3</title><link>https://alnutile.github.io/posts/131/</link><pubDate>Thu, 05 Feb 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/131/</guid><description>We needed to offer timed links to the urls and we are using Laravel-Flysystem
Aaron Smith found this how to but I wanted it to work with existing use of FlySystem.
I ended up moving the code into a trait so we could use this one feature
&amp;lt;?php namespace AlfredNutileInc\CoreApp\Helpers;
use GrahamCampbell\Flysystem\Facades\Flysystem;
use Illuminate\Support\Facades\Log;
trait S3Helper {
protected $path_for_assets;
protected $expire_time;
public $driver = 'awss3';
/**
* @return string
*/
public function getDriver()
{
return $this-&amp;gt;driver;
}
/**
* @param string $driver
*/
public function setDriver($driver)
{
$this-&amp;gt;driver = $driver;
}
public function iterateOverFiles($files)
{
foreach($files as $key =&amp;gt; $file)
{
if(isset($file['path'])) {
$files[$key]['url'] = $this-&amp;gt;getSignedUrl($file['path']);
}
}
return $files;
}
protected function getFiles()
{
$this-&amp;gt;path_for_assets = $this-&amp;gt;project_id .</description></item><item><title>Laravel Behat and Selenium</title><link>https://alnutile.github.io/posts/130/</link><pubDate>Mon, 02 Feb 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/130/</guid><description>Laracasts has some great videos and libraries for Laravel 5 and Behat integration.
Examples
https://github.com/laracasts/Behat-Laravel-Extension
and
https://laracasts.com/lessons/laravel-5-and-behat-bffs
Two things that I still need and get from this though that I do not think I can get from those are
Laravel 4.2 support which obviously is not going to work with the above L5 libraries :) Mocking APIs when running under APP_ENV=local or testing Also I think with the libraries above only goutte drivers work for the APP_ENV setting.</description></item><item><title>Sqlite and Laravel</title><link>https://alnutile.github.io/posts/128/</link><pubDate>Sun, 18 Jan 2015 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/128/</guid><description>It is really really nice to use this for testing and local since any reseed work is quick.
Overall the swap out is easy and I do not think, so far, there has been any issues going to mysql on production.
The only two things to set over all is
Seeding In my DatabaseSeeder.php file I set this
&amp;lt;?php
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\App;
use Illuminate\Support\Facades\DB;
class DatabaseSeeder extends Seeder {
/**
* Run the database seeds.</description></item><item><title>Reusable UI/API CRUD Laravel and Angular</title><link>https://alnutile.github.io/posts/126/</link><pubDate>Fri, 26 Dec 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/126/</guid><description>related repo
Working on a recent project it finally hit me how repetitive then need was to make a Resource at the API level and to make the UI to Create, Retrieve, Update, Delete, Index. And how easy it would be to make a foundation for this to use for each Resource keeping the UI goals consistent and simple between these Resources. With this came also a set of API tests in Behat that could also be used with the project.</description></item><item><title>Laravel Blade and Angular brackets</title><link>https://alnutile.github.io/posts/124/</link><pubDate>Fri, 19 Dec 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/124/</guid><description>I use one AngularController.php to render main.blade.php file that then renders angular. The only other blade file is the login page. I could have done this in the routes.php file but since the routes file has the login page I decided to place it in this controller.
&amp;lt;?php namespace App\Http\Controllers;
use Illuminate\Support\Facades\Blade;
use Illuminate\Support\Facades\Config;
use Illuminate\Support\Facades\View;
use Laracasts\Utilities\JavaScript\Facades\JavaScript;
/**
* @Middleware(&amp;quot;auth&amp;quot;)
*/
class AngularController extends BaseController {
use UserHelper;
/**
* @var UserService
*/
private $userService;
public function __construct(UserService $userService)
{
$this-&amp;gt;userService = $userService;
}
/**
* @Get(&amp;quot;behat&amp;quot;, as=&amp;quot;behat.</description></item><item><title>Embed Template Data in View (Angular, Laravel)</title><link>https://alnutile.github.io/posts/122/</link><pubDate>Tue, 02 Dec 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/122/</guid><description>Sometimes, when your frontend shares the same view rendering of the backend, you can store data in the window object. This can save you queries to the backend when, for example, Profile Data that shows on every pages request.
Embed output into window or $window In the Controller I am using to output the Angular template (app/views/main.blade.php for example) I inject the window data that I want all pages to have.</description></item><item><title>Quick fixture data and mocking external APIs</title><link>https://alnutile.github.io/posts/121/</link><pubDate>Mon, 01 Dec 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/121/</guid><description>We are using a number of external APIs on a project (Pusher, Iron.io, Github, Saucelabs etc). Github is key as we are using it to store and retrieve files from for editing on the site. When running phpunit it is easy to mock these Classes but when running behat tests or protractor we had to do to things to make it possible to mock the tests and not hit the external APIs.</description></item><item><title>Mocking Queue Service for faster Behat Testing</title><link>https://alnutile.github.io/posts/120/</link><pubDate>Sun, 23 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/120/</guid><description>As I wrote about here I am using behat to tests our APIs. I could have used Laravel&amp;rsquo;s guzzle and phpunit integration to test the controllers but I decided to go with Behat. But this means when hitting those endpoints I need to find another way to mock services.
Since Laravel has you register Providers you can easily replace or override a provider. In this case the &amp;ldquo;&amp;lsquo;Illuminate\Queue\QueueServiceProvider&amp;rsquo;&amp;rdquo; provider with my own.</description></item><item><title>Docker, MailCatcher and Laravel</title><link>https://alnutile.github.io/posts/118/</link><pubDate>Fri, 21 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/118/</guid><description>I wrote an article on Mailcatcher and Homestead here but as I move into docker I wanted the same setup for my docker website container which was super easy.
First I downloaded this docker images and ran the command as he noted. Once done I had the website up and running.
From there I just started my website container and made a link.
docker run -d -p 80:80 --name website --link mailcatcher:mailcatcher -v $PWD:/share alnutile/nginxlaravel:0.</description></item><item><title>Redirecting back to original Angular.js destination from Laravel Auth</title><link>https://alnutile.github.io/posts/119/</link><pubDate>Fri, 21 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/119/</guid><description>UPDATE
You can see in the comments some updated info.
When a user visits an Angular url (not html5) like http://foo.com/app#some/long/path
Then gets redirected to http://foo.com/auth/login because they are not logged in. It would be nice to send them right back after that.
These steps will make that possible.
Include this file in your authentication page.
#intended.js
(function(){
'use strict';
var intended = window.location.hash;
(intended.length &amp;gt; 0) ? jQuery.cookie('intended', '/app' + intended) : jQuery.</description></item><item><title>Laravel and Angular Time/Date Display</title><link>https://alnutile.github.io/posts/114/</link><pubDate>Mon, 10 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/114/</guid><description>Angular seems to, by default, easily deal with milliseconds, https://docs.angularjs.org/api/ng/filter/date.
Laravel outputs created_at as a YYYY-MM-DD HH:MM:SS format that just does not work well with the Angular date filter.
It is really simple to change the output of the date in Laravel just add this to your Model or BaseModel or even better Trait
/**
* Leave as Timestamps for Angular
* @return array
*/
public function getDates()
{
return [];
}
public function getCreatedAtAttribute($value)
{
$value = date('U', strtotime($value));
return $value * 1000;
}
public function getUpdatedAtAttribute($value)
{
$value = date('U', strtotime($value));
return $value * 1000;
}
This is noted in the docs as well http://laravel.</description></item><item><title>Moving Forge Deploy Script to Envoy</title><link>https://alnutile.github.io/posts/115/</link><pubDate>Mon, 10 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/115/</guid><description>As we start to move off of Forge I still want the automation to take place after all tests pass.
In Codeship or Locally I just follow some instructions from here http://laravel.com/docs/4.2/ssh
Locally Setup Envoy globally as noted.
Run envoy init
And then I pasted this into my Envoy.blade.php
@servers(['dev' =&amp;gt; 'behat_dev'])
@task('deploy_dev', ['on' =&amp;gt; 'dev'])
date
cd /home/forge/foo-dev
git pull origin dev
composer config -g github-oauth.github.com sometoken
composer install
composer dump-autoload
php artisan dump-autoload
php artisan migrate
php artisan migrate:refresh --seed
~/node_modules/bower/bin/bower install
npm install
php artisan queue:restart
@endtask
Setup you .</description></item><item><title>Laravel 4.2 and Dotenv to set environment</title><link>https://alnutile.github.io/posts/113/</link><pubDate>Sun, 09 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/113/</guid><description>To start using Dotenv now it is very simple.
One include the library #composer.js
&amp;quot;require&amp;quot;: {
&amp;quot;laravel/framework&amp;quot;: &amp;quot;4.2.*&amp;quot;,
&amp;quot;vlucas/phpdotenv&amp;quot;: &amp;quot;1.0.*@dev&amp;quot;
},
Two update your start.php #bootstrap/start.php line 27
Dotenv::load(__DIR__ .'/../');
$env = $app-&amp;gt;detectEnvironment(
function()
{
return getenv('APP_ENV');
}
);
Make sure to set your .env file #.env
APP_ENV='local'
That is it you are set to use it for all your environments.
Update
For Heroku I used this instead
$env = $app-&amp;gt;detectEnvironment(
function()
{
if(!</description></item><item><title>Speeding up PHPunit tests and Behat in Laravel for Database refreshes</title><link>https://alnutile.github.io/posts/112/</link><pubDate>Thu, 06 Nov 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/112/</guid><description>This article covers some good tips on this. Ideally you do not hit the database in unit tests but sometimes you do. Also in behat it hits the db all the time since it is at the Acceptance level.
Sqlite It is a great database and works. We easily can use it on running tests. When seeding the db I have my main seeding class doing this
&amp;lt;?php
use Illuminate\Database\Seeder;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Facades\App;
use Illuminate\Support\Facades\Config;
use Illuminate\Support\Facades\DB;
class DatabaseSeeder extends Seeder {
/**
* Run the database seeds.</description></item><item><title>Angular Pusher Factory to Centralize Code (also using Laravel to set constants and properties)</title><link>https://alnutile.github.io/posts/111/</link><pubDate>Fri, 24 Oct 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/111/</guid><description>This will cover
Making an Angular factory to centralize Pusher setup in Angular Passing settings form Laravel to Angular (though could be just Angular and a .env file as well) Passing Constants into the Angular App to pass these settings around, in this case to the Pusher Factory. Setup your constants This is where I call in the info I need to use later on.
(function(){
function config($stateProvider, $urlRouterProvider) {
$urlRouterProvider.</description></item><item><title>CSRF Tokens and Angular.js</title><link>https://alnutile.github.io/posts/110/</link><pubDate>Wed, 15 Oct 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/110/</guid><description>This is key to preventing Cross-site request forgery. Basically you log in and do some work on one site, then go to a malicious site and now they can send POST requests to the sites you have authentication to. But by passing a token we can prevent that issue.
The steps
Make a token path Make a token service to use again and again in Angular.js Add it as a resolve to the route in Angular.</description></item><item><title>Temporary Auth Updates L5</title><link>https://alnutile.github.io/posts/109/</link><pubDate>Sun, 12 Oct 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/109/</guid><description>Auth updates First make sure your composer update has the latest Laravel and check that there are not relevant fixes already via laravel/docs master laravel/framework master or laravel/laravel dev
Moved evn files to the new format and only 1 is needed now having the
APP_ENV='local' setting for the environment.
Then update the path in the AuthController to go to auth/login
#app/Http/Controllers/Auth/AuthController
public function login(LoginRequest $request)
{
if ($this-&amp;gt;auth-&amp;gt;attempt($request-&amp;gt;only('email', 'password')))
{
return redirect('/');
}
return redirect('/auth/login')-&amp;gt;withErrors([
'email' =&amp;gt; 'The credentials you entered did not match our records.</description></item><item><title>Multi Threaded Queue Processing</title><link>https://alnutile.github.io/posts/106/</link><pubDate>Wed, 10 Sep 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/106/</guid><description>I needed a way to run a bunch of jobs in parallel and I am use to using the Symfony Process Component for that.
So this post will show how I did this in Laravel 4.3 via the Queue so I can remember next time.
What will come out of this is a workflow as seen here
We will create two Artisan Commands. This allows us to use Symfony Process to run numerous console commands in the background.</description></item><item><title>Sorting related models in Laravel</title><link>https://alnutile.github.io/posts/104/</link><pubDate>Fri, 15 Aug 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/104/</guid><description>There are a number of related models to this one model that I store in the Models $relations property
protected static $relations = [
'owner',
'apns',
'zoning_urls',
'structures.address',
'structures.comments.user.profiles',
'listings',
'attachments',
'structures.structure_type',
'property_owner',
'primary_property_type',
'address',
'property_specialist.profiles',
'listings.team'
];
This allows me to easily reuse this for each query
$found = $found-&amp;gt;load(static::$relations);
But there is one model I removed from that list to do a dynamic query/sorting on it
$found = $this-&amp;gt;property-&amp;gt;with([
'verifiers' =&amp;gt; function($query) {
$query-&amp;gt;with('user.</description></item><item><title>Drush and Homestead Vagrant Box</title><link>https://alnutile.github.io/posts/100/</link><pubDate>Sun, 20 Jul 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/100/</guid><description>Had some trouble doing the normal composer install so I went with the manual install noted here https://github.com/drush-ops/drush
Basically I downloaded and unzipped the repo to /usr/local/sbin. Then I did a symlink to /usr/bin
cd /usr/bin
sudo ln -s /usr/local/sbin/drush/drush .
Then in /usr/local/sbin/drush I ran
sudo composer install</description></item><item><title>Polymorphic relationship Laravel</title><link>https://alnutile.github.io/posts/99/</link><pubDate>Sun, 20 Jul 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/99/</guid><description>This example will show a typical &amp;ldquo;Attachment&amp;rdquo; need. The Laravel docs really do cover alot as seen here especially &amp;ldquo;Polymorphic Relation Table Structure”. I cover many to many polymorphic relationships here
I will cover an example of an Attachment that has some fields. And it is related to a model, in this example &amp;ldquo;Post&amp;rdquo;
Using the Way Generators to make this resource.
php artisan generate:resource attachment --fields=&amp;quot;attachable_type:string, attachable_id:integer, name:string, file_name:string, note:text, tag:string”
As noted in the laravel docs our table for Attachments would look something like this</description></item><item><title>Many to Many Polymorphic Relations from Laravel to Angular and back</title><link>https://alnutile.github.io/posts/95/</link><pubDate>Sat, 05 Jul 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/95/</guid><description>This will cover having a polymorphic relationship in Laravel, showing it on a form in Angular and saving it back to Laravel. Overall it is well documented here at the great docs at Laravel but this post might help in a few areas.
As someone defines Polymorphic Relationships there
&amp;ldquo;Polymorphic relations allow a model to belong to more than one other model, on a single association. For example, you might have a photo model that belongs to either a staff model or an order model.</description></item><item><title>Laravel Homestead and MailCatcher</title><link>https://alnutile.github.io/posts/93/</link><pubDate>Wed, 02 Jul 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/93/</guid><description>Using MailCatcher http://mailcatcher.me/ I can see the emails sent by the website.
First checkout https://github.com/fideloper/Vaprobash/pull/348 to get your box ready All I did was
Log into the vagrant box and run sudo apt-get install libsqlite3-dev
Then
sudo apt-get install ruby1.9.1-dev -y
sudo gem install mailcatcher
Then
sudo gem install mailcatcher -V
Set your mail.php config This is found in app/config and should be copied to app/config/local so it only applies to local</description></item><item><title>Laravel Sentry and UUID</title><link>https://alnutile.github.io/posts/94/</link><pubDate>Wed, 02 Jul 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/94/</guid><description>Update October 10 10:07 Have hit a few issues with this model but still working okay.
To start this trait does some of the work to manage incoming POST data.
&amp;lt;?php namespace BehatEditor\Helpers;
use Rhumsaa\Uuid\Uuid;
trait UuidHelper {
protected $uuid;
protected $saved;
public function getUuid()
{
return $this-&amp;gt;uuid;
}
public function setUuid($uuid = null)
{
if($uuid === null)
{
$uuid = $this-&amp;gt;generateNewId()-&amp;gt;toString();
}
$this-&amp;gt;uuid = $uuid;
return $this;
}
/**
* Get a new version 4 (random) UUID.</description></item><item><title>Laravel Homestead and Beanstalkd Console</title><link>https://alnutile.github.io/posts/92/</link><pubDate>Mon, 30 Jun 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/92/</guid><description>I am doing some queue work and wanted beanstalkd console installed so I can see the status of the queue
Using Laravel Homestead as the vagrant box http://laravel.com/docs/homestead I needed to
Download beanstalkd console https://github.com/ptrofimov/beanstalk_console Setup Homesteads yml file Provision the box Setup my local hosts file to a url Finally run php artisan queue:listen to have my app call to the queue. And that was about it.</description></item><item><title>Showing nested relationships details</title><link>https://alnutile.github.io/posts/87/</link><pubDate>Mon, 09 Jun 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/87/</guid><description>This is soooo easy but this is always something this easy can be missed. In this example we have a Property Model with Buildings that have an address.
So the model files look like this
//Property.php
//structures = buildings
public function structures()
{
return $this-&amp;gt;hasMany('Structure');
}
//Structure.php
public function address()
{
return $this-&amp;gt;belongsTo(&amp;quot;Address&amp;quot;);
}
So when I query a property I now get
{
&amp;quot;id&amp;quot;: 1,
&amp;quot;structures&amp;quot;: [
{
&amp;quot;id&amp;quot;: 6,
&amp;quot;address_id&amp;quot;: 9,
&amp;quot;address&amp;quot;: {
&amp;quot;id&amp;quot;: 9,
&amp;quot;city&amp;quot;: &amp;quot;Melvinport&amp;quot;,
&amp;quot;state&amp;quot;: &amp;quot;MT&amp;quot;,
&amp;quot;zip&amp;quot;: &amp;quot;75182&amp;quot;,
&amp;quot;lat&amp;quot;: -18.</description></item><item><title>Simple Laravel CMS Example</title><link>https://alnutile.github.io/posts/86/</link><pubDate>Mon, 02 Jun 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/86/</guid><description>Quick intro to Laravel using a custom CMS app I made The repo is here
This is mainly to show an example of a small CMS being built in Laravel. CMS (Content Management System) that is at it&amp;rsquo;s most basic level, Authentication, Simple Content Types etc.
What we will cover.
Installing the &amp;ldquo;CMS&amp;rdquo; and what Page Types it comes with Looking at the folder layout &amp;ldquo;Where is&amp;hellip;.&amp;rdquo; App config setting up the site PHP Artisan command to migrate the site Routes Page example looking at the wysiwyg, Controller, View etc Tags - lets add a many to many relationship This is NOT the end all setup just an example.</description></item><item><title>Quick Gulp file to run php-unit tests</title><link>https://alnutile.github.io/posts/85/</link><pubDate>Sun, 25 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/85/</guid><description>MUCH BETTER WAY HERE
This is setup for Laravel but can work for any app. Most of this is due to the great Laracasts on Gulp
Download and setup gulp
First make a package.json file in the root of your app and just put curly brackets in it.
touch package.json
vim package.json
//package.json
{
}
Then run the needed node commands
npm install -g gulp
npm install gulp --save-dev
npm install gulp-notify --save-dev
npm install gulp-phpunit --save-dev
Now the package.</description></item><item><title>Laravel and non email authentication</title><link>https://alnutile.github.io/posts/84/</link><pubDate>Tue, 20 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/84/</guid><description>Note to self. The Laravel docs are here that cover Authentication. But when it came time to use a filter and a non email based user name I had to modify the auth.basic filter, or any filter you want to use.
It ended up looking like this since I wanted user_account and not email to be the username for authentication.
//app/filters.php
Route::filter('auth.basic', function()
{
return Auth::basic('user_account');
});
You can see this option here</description></item><item><title>Using Beanstalkd to Schedule the release of a post in Laravel</title><link>https://alnutile.github.io/posts/78/</link><pubDate>Mon, 19 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/78/</guid><description>Phase 1 of my master plan is to regularly write more posts on misc web and coding in general related topics. And sometimes I can sit and write a few of them but it would be best not to release them all at once for a lot of reason.
So this will cover the way I setup a schedule feature to my post creation process. Yes there are libraries for this but I just wanted to have fun making this feature.</description></item><item><title>Using Dot Env files to manage settings</title><link>https://alnutile.github.io/posts/76/</link><pubDate>Sun, 18 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/76/</guid><description>Wow. Included in Laravel http://laravel.com/docs/configuration#protecting-sensitive-configuration
removed due to old news
http://mattstauffer.co/blog/laravel-forge-using-environment-variables-for-environment-detection/
Update I really like the second link and how it sets up a .env file first to just return a simple string. After that you can have the .env.production.php or .env.local.php that laravel can look for.
//bootstrap/start.php
$env = $app-&amp;gt;detectEnvironment(function()
{
if (file_exists(__DIR__ . '/../.env')) {
return include(__DIR__ . '/../.env');
} else {
return 'production';
}
});
Quite simple at that point to separate all of the environments.</description></item><item><title>Using Scopes in Laravel</title><link>https://alnutile.github.io/posts/69/</link><pubDate>Fri, 16 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/69/</guid><description>I have about 4 models that all share 2 common queries. I want all of them that are &amp;ldquo;Published&amp;rdquo; and or Ordered by a field called Order.
This does help with some DRY goals, but you could easily change or add to a scope as needed to update all the queries involved etc. Especially if at a later point you break this out into a Repository Patter to use a different ORM.</description></item><item><title>Adding Column using sqlite caused error 'Cannot add a NOT NULL column with default value NULL'</title><link>https://alnutile.github.io/posts/64/</link><pubDate>Sun, 04 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/64/</guid><description>After the security update I had to add a remember_token to my user table. security update
Since I am using sqllite locally I ended up with this error
&amp;gt;php artisan migrate
[Illuminate\Database\QueryException]
SQLSTATE[HY000]: General error: 1 Cannot add a NOT NULL column with default value NULL (SQL: alter table &amp;quot;users&amp;quot; add column &amp;quot;remember_token&amp;quot; text not null)
Finally this post made it clear I had to make this nullable
//migration file
/**
* Run the migrations.</description></item><item><title>php artisan migrate:reset not working</title><link>https://alnutile.github.io/posts/63/</link><pubDate>Sun, 04 May 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/63/</guid><description>This was an issue for me using sqlite. There was a simple fix noted in the irclogs of Laravel!
So under my require-dev or require I placed
//composer.json
&amp;quot;require&amp;quot;: {
&amp;quot;laravel/framework&amp;quot;: &amp;quot;4.1.*&amp;quot;,
&amp;quot;way/generators&amp;quot;: &amp;quot;dev-master&amp;quot;,
&amp;quot;doctrine/dbal&amp;quot;: &amp;quot;~2.3&amp;quot;
},
ran composer update and all was well again!</description></item><item><title>Adding Markdown Editor to your Blog/CMS</title><link>https://alnutile.github.io/posts/60/</link><pubDate>Mon, 28 Apr 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/60/</guid><description>In this case it is Laravel but any PHP framework could use this.
Get the Library I used the dflydev-markdown library which uses php-markdown as it&amp;rsquo;s base. 1
As it notes I load it up with composer.json and I am ready to use it.
Inject the class into your controller At the controller level I inject it like this
//BaseController.php
use dflydev\markdown\MarkdownExtraParser;
class BaseController {
public $mk;
public function __construct(MarkdownExtraParser $mk = null)
{
$this-&amp;gt;mk = ($mk == null) ?</description></item><item><title>Angular and Laravel Partials</title><link>https://alnutile.github.io/posts/55/</link><pubDate>Thu, 13 Feb 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/55/</guid><description>Blade uses {{ }} so it does not play well with Angular.js but I decided to use partials. I am not using Angular routes so I am just including partials in my controller file.
My blade file has this.
&amp;lt;div ng-include=&amp;quot;template.url&amp;quot;&amp;gt;&amp;amp;nbsp;&amp;lt;/div&amp;gt;
Then the partial has this
&amp;lt;div class=&amp;quot;issues-to-get&amp;quot; ng-show=&amp;quot;issues.length &amp;gt; 0&amp;quot;&amp;gt;
&amp;lt;ul&amp;gt;
&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;lt;li&amp;gt;&amp;lt;label&amp;gt;&amp;lt;input type=&amp;quot;checkbox&amp;quot; value=&amp;quot;all&amp;quot; /&amp;gt;All&amp;lt;/label&amp;gt;&amp;lt;/li&amp;gt;
&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;lt;li ng-repeat=&amp;quot;issue in issues&amp;quot;&amp;gt;&amp;lt;label&amp;gt;&amp;lt;input type=&amp;quot;checkbox&amp;quot; value=&amp;quot;{{ issue.id }}&amp;quot; /&amp;gt;{{ issue.title }}&amp;lt;/label&amp;gt;&amp;lt;/li&amp;gt;</description></item><item><title>Laravel Project Management Site</title><link>https://alnutile.github.io/posts/44/</link><pubDate>Mon, 03 Feb 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/44/</guid><description>Still has some work to be done for sure.&amp;nbsp;
https://github.com/alnutile/pml4
The goal will be a PM site that integrates with the github api since I have endless issues with clients getting confused using the Github interface for tickets. So this system will wrap around that.
In the mean time
Projects are&amp;nbsp;in place with many to many on Users
Issues are&amp;nbsp;in place with a one to many on Projects, a One to One User</description></item><item><title>Nesting Laravel 4 Routes</title><link>https://alnutile.github.io/posts/41/</link><pubDate>Fri, 31 Jan 2014 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/41/</guid><description>Make sure your route file is set to show this
For my example is is projects and they have issues
So my route looks like this
#routes.php
Route::resource('projects', 'ProjectsController');
Route::resource('projects.issues', 'IssuesController');
So now my URLs will look lik this
/projects/4/issues &amp;lt;--shows all issues
/projects/4/issues/2 &amp;lt;--shows issue 2 in project 4
Finally on the Project Show page I have these linkRoute&amp;rsquo;s in place
&amp;lt;tr&amp;gt;
@endif
&amp;lt;td&amp;gt;{{ $issue['id'] }}&amp;lt;/td&amp;gt;
&amp;lt;td&amp;gt;{{ HTML::linkRoute('projects.issues.show', $issue['name'], array($project-&amp;gt;id, $issue['id'])) }}&amp;lt;/td&amp;gt;
&amp;lt;td&amp;gt;{{ $issue['active'] }}&amp;lt;/td&amp;gt;
&amp;lt;td&amp;gt;{{ $issue['description'] }}&amp;lt;/td&amp;gt;
&amp;lt;/tr&amp;gt;
and</description></item><item><title>Vagrant and Laravel</title><link>https://alnutile.github.io/posts/13/</link><pubDate>Tue, 25 Jun 2013 00:00:00 +0000</pubDate><guid>https://alnutile.github.io/posts/13/</guid><description>Most likely for any internal server I had to run command
php artisan serve &amp;ndash;host=&amp;ldquo;0.0.0.0&amp;rdquo;
to access the port forwarding feature of vagrant
Update: I had to also make sure to set the forward to the same as the original 8000 So my Vagrant file looked like this gist</description></item></channel></rss>