<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>rails on Alfred Nutile</title><link>https://alfrednutile.info/tags/rails/</link><description>Recent content in rails on Alfred Nutile</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 03 Sep 2013 00:00:00 +0000</lastBuildDate><atom:link href="https://alfrednutile.info/tags/rails/index.xml" rel="self" type="application/rss+xml"/><item><title>Heroku in Heroku</title><link>https://alfrednutile.info/posts/30/</link><pubDate>Tue, 03 Sep 2013 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/30/</guid><description><p>As I build out these sites I had to run heroku commands on heroku since the admin site needs to setup Domains and Subdomain on each new site. I was glad they had the&nbsp;<a href="https://github.com/heroku/heroku.rb" target="_blank">https://github.com/heroku/heroku.rb</a>&nbsp;gem&nbsp;that made it possible to make an interface for administrators to add domains and subdomains to their heroku site.&nbsp;</p><p>In my controller I included the heroku-api as the node on the github page.</p><script src="https://gist.github.com/alnutile/f487851c7dd0cb01a4fb.js"/><p>After that, on an update or a create I check if the domain exists.</p><p>There was another post on github in the issue queue to help me figure out how to<strong>rescue out of an error</strong>. Ideally though I would direct the user back to the edit page with an error message or autocomplete as they type. But right now I save their settings to the Partner model and show the error.</p><p>This allows me to use the "heroku domain:add --app APPNAME domain_name" command from within the app.</p><p>Setting up the ENV variables are explained on setting up heroku pages like this one&nbsp;<a href="https://devcenter.heroku.com/articles/config-vars" target="_blank">https://devcenter.heroku.com/articles/config-vars</a>&nbsp;so you can do this at the command line and note store it in a file on git.&nbsp;</p></description><tags>rails</tags></item><item><title>HerokuApps and Multiple Domains</title><link>https://alfrednutile.info/posts/27/</link><pubDate>Sun, 01 Sep 2013 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/27/</guid><description><p>There are some great docs online for figuring out how to setup heroku domains.</p><p><a href="https://devcenter.heroku.com/articles/custom-domains">https://devcenter.heroku.com/articles/custom-domains</a> as well as others.</p><p>The feature I had to get setup was that for<strong>every new herokuapp</strong> I spun up under my account/clients account it had to make a sub-domain under that SaaS owners zone/domain.</p><p>For example the owner wanted all of these apps to show up under freesurvey.com (not really but just an example url)&nbsp;so each one they spun up would be, for example yoursite.freesurvey.com but also later the person who "subscribed" for the product&nbsp;can also use their real domain like www.mysite.com or survey.mysite.com so it would be fully branded under their name as well.</p><p>The interface for the owner and the subscriber would allow them to do 2 things. One they could enter the sub-domain they wanted eg "yoursite" as long as it was free to use in the owners domain name spacing eg "freesurvey.com". Just as you see with basecamp or freshbooks. Second they had a field to enter a full domain they wanted to point here as well eg "survey.mysite.com" to quickly setup the subscriber if they were ready to do that. &nbsp;Keeping in mind each site is a new herokuapp which is really a new IP address. And heroku does not suggest the use of this IP address but to use the herokuapp name as I use below.</p><p>After clicking save a few things took place.</p><ol><li>A new herokuapp was spun up from the master git branch&nbsp;</li><li>The herokuapp was given a name that is available from heroku, in my case I ran "heroku create --app NAMEHERE<sup>1</sup>" using a name the script would produce that I am about 99% sure was available at heroku. But at this point it could just use the one heroku gives it and pass it back to the script.</li><li>During the heroku install the&nbsp;zerigo_dns addon was added.&nbsp;</li><li>The script then adds a domain to heroku via the command "heroku domains:add&nbsp;NAMEHERE.freesurvey.com"&nbsp;this automatically submits that domain via the add on "<a href="http://zerigo_dns" target="_blank">zerigo_dns</a>" so now my DNS records for that domain "freesurvey.com" includes a CNAME to NAMEHERE.freesurvey.com that points to proxy.heroku.com. The benefit here is that I can do this all in the script at the command line and API to setup the herokuapp so it will respond to the this domain, and the DNS so that it knows of this new subdomain and what to do with it.<br/><br/>
A Wildcard DNS record for freesurvey.com would not have worked since each record points to the herokoapp which is it's own domain/IP. So NAMEHERE<strong>1</strong>.herokuapp.com and&nbsp;NAMEHERE<strong>2</strong>.herokuapp.com&nbsp;are typically&nbsp;a different server and IP. I did not want all of these sites on one server and I wanted to use a Paas provider like heroku for reasons I note<a href="http://www.alfrednutile.info/posts/23" target="_blank">here</a>&nbsp;.&nbsp;</li><li>Finally when the client who now uses this site is ready to point it to their own domain/zone they enter into the form "survey.mydomain.com" and this registers with the herokuapp via the command "heroku domains:add&nbsp;survey.mydomain.com"&nbsp;to accept requests from this domain and point it to "NAMEHERE.herokuapp.com".<br/><br/>
So now it works for NAMEHERE.freesurvey.com, survey.mydomain.com and of course the name heroku was give to make the app&nbsp;it&nbsp;NAMEHERE.herokuapp.com. Of course the subscriber has to update their records that ONE time to point their CNAME survey.mydomain.com to ideally&nbsp;NAMEHERE.herokuapp.com</li></ol><p>&nbsp;</p><p>Zerigo DNS&nbsp;<a href="https://devcenter.heroku.com/articles/zerigo_dns" target="_blank">https://devcenter.heroku.com/articles/zerigo_dns</a></p><p>This was already setup for the client who owns the survey making SaaS site in this case for example "freesurvey.com" (not really this domain just an example)</p><p>So Zerigo was the Name Server&nbsp;provider for this domain. And was linked to heroku account I made for the client.&nbsp;</p><p>&nbsp;</p><p><sup>1</sup>This name is made by Time.now.to_i via the ruby script prefixed with a consistent string of characters like freesurvey so I would end up with an App Name like freesurvey1234556789 which I could error check and make another until heroku says that was available. But that name is pretty rare so so far they are always available.</p></description><tags>rails</tags></item><item><title>Going Angular.js</title><link>https://alfrednutile.info/posts/2/</link><pubDate>Fri, 12 Apr 2013 00:00:00 +0000</pubDate><guid>https://alfrednutile.info/posts/2/</guid><description><p>Going Angular</p><p>
Took some time to rewrite my drupal/bootstrap site into Angular.js and slim php.
Using slim and a seed project I quickly had a rest api to get the different content types, Blog, Page etc.
I am using the Page content type to make other dynamic parts to the site like Footer and Header.</p><p>
After a quick migration from drupal to a more basic MySQL db layout (soon mongodb?) I put together a Angular.js
front end.</p><p>
Still have a ton to learn about Angular and I figure this will only help. I will post some notes soon on Angular for a different
project I am working on.</p><p>
Some good links<br><strong>Angular</strong><br>
http://angularjs.org/<br>
They have a great tutorial there.<br><strong>The Slim Rest skeleton here</strong><br>
https://github.com/ccoenraets/angular-cellar<br><strong>Great Seed for a Project</strong><br>
https://github.com/angular/angular-seed<br>
This seems like it could have been a good starter to build out the site
http://yeoman.io/
But I already had a Twitter Bootstrap theme in place and ready.</description><tags>rails</tags></item></channel></rss>